{"ast":null,"code":"import { capitalizeString } from \"./functions\";\n\nfunction make_line(point, width) {\n  let line = `M 0 ${point} H ${width}`;\n  return `<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`;\n}\n\nfunction make_yy_tick(x, y) {\n  let line = `M ${x - 10} ${y} L ${x} ${y}`; // return `<path class=\"plot_xmark\" d=\"${line}\" data-z-index=\"0\" />`\n\n  return `<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`;\n}\n\nexport function get_lines(width, height, lines_number) {\n  let frame = height / lines_number;\n  let result = [];\n\n  for (let i = lines_number; i <= lines_number; i++) {\n    let point = frame * i;\n    result.push(make_line(point, width));\n  }\n\n  return result;\n}\nexport function get_y_ticks(height, lines_number) {\n  let result = [];\n  let frame = height / lines_number;\n\n  for (let i = 0; i <= lines_number; i++) {\n    let point = frame * i;\n    result.push(make_yy_tick(0, point));\n  }\n\n  return result;\n}\n\nfunction make_x_tick(x, y) {\n  let line = `M ${x} ${y} L ${x} ${y + 10}`;\n  return `<path class=\"plot_xmark\" d=\"${line}\" data-z-index=\"0\" />`;\n}\n\nexport function get_ticks(width, height, ticks_number) {\n  let result = [];\n  let frame = width / (ticks_number - 1);\n\n  for (let i = 0; i < ticks_number; i++) {\n    let point = frame * i;\n    result.push(make_x_tick(point, height));\n  } // let frame = width / (length - 1)\n  // for(let i=0; i<ticks_number; i++){\n  //     // result.push(`<text x=\"${frame*i}\" class=\"plot_xtick\" text-anchor=\"middle\" y=\"${height + 30}\">${formatDate_monthly(data_mock[data_frame*i][1])}</text>`)\n  //     result.push(`<text x=\"${frame*i}\" class=\"plot_xtick\" text-anchor=\"middle\" y=\"${height + 30}\">${formatDate_monthly(data_mock[i][1])}</text>`)\n  // }\n\n\n  return result;\n}\n\nfunction make_y_tick(x, y, value) {\n  return `<text x=\"${x}\" text-anchor=\"end\" class=\"plot_ytick\" y=\"${y}\">${value}</text>`;\n}\n\nexport function get_y_axis(x, y, height, lower_index, upper_index) {\n  let result = [];\n  let lines_number = upper_index - lower_index;\n  let frame = height / lines_number; // let lower_index = 10 - lines_number;\n\n  let difference = Math.abs(lower_index); // for(let i=0; i<=lines_number; i++){\n  //     result.push(make_y_tick(-20, height - frame*(i),i * 10));\n  // }\n\n  for (let i = 0; i <= lines_number; i++) {\n    result.push(make_y_tick(-20, height - frame * i, i * 10));\n  }\n\n  let line = `M ${x} ${y} L ${x} ${y + height}`;\n  result.push(`<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`);\n  return result;\n}\nexport function prepare_title(title, width, height, x_trans, y_trans) {\n  return `<text x=\"${width / 2}\" class=\"plot_title\" text-anchor=\"middle\" y=\"${-y_trans / 3}\">${title}</text>`;\n}\nexport function prepare_x_axis(width, height, ticks_number, data_mock, title, y_trans) {\n  let result = [];\n  let length = Object.keys(data_mock).length;\n  let data_frame = Math.floor(length / (ticks_number - 1));\n  let frame = width / (ticks_number - 1);\n\n  if (width <= 700) {\n    for (let i = 0; i < ticks_number; i++) {\n      result.push(`<text x=\"${frame * i}\" class=\"plot_xtick\" text-anchor=\"middle\" y=\"${height + 25}\">${formatDate_monthly(data_mock[data_frame * i][1])}</text>`);\n    }\n  } else {\n    for (let i = 0; i < ticks_number; i++) {\n      result.push(`<text x=\"${frame * i}\" class=\"plot_xtick\" text-anchor=\"middle\" y=\"${height + 25}\">${formatDate(data_mock[data_frame * i][1])}</text>`);\n    }\n  }\n\n  let line = `M 0 ${height} H ${width}`; // console.log(\"***\")\n  // console.log(height)\n  // console.log(y_trans)\n\n  let height_trans = y_trans; // if(width>800){\n  //     height_trans = height_trans/2\n  // }\n\n  if (width > 700) {\n    result.push(`<text x=\"${width / 2}\" text-anchor=\"middle\" class=\"plot_xaxis_title\" y=\"${height + height_trans - 30}\"><tspan>${title}</tspan></text>`);\n  } else {\n    result.push(`<text x=\"${width / 2}\" text-anchor=\"middle\" class=\"plot_xaxis_title\" y=\"${height + 40}\"><tspan>${title}</tspan></text>`);\n  }\n\n  result.push(`<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`);\n  return result;\n} // export function get_x_axis(title, width, height, x_trans, y_trans){\n//     let result = []\n//     let line = `M 0 ${height} H ${width}`;\n//     // console.log(\"***\")\n//     // console.log(y_trans)\n//     let height_trans = y_trans\n//     if(width>800){\n//         height_trans = height_trans/2\n//     }\n//     result.push(`<text x=\"${width/2}\" text-anchor=\"middle\" class=\"plot_xaxis_title\" y=\"${height + height_trans + 10}\"><tspan>${title}</tspan></text>`)\n//     result.push(`<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`)\n//     return result\n// }\n\nexport function get_y_axis_label(title, height, x_trans) {\n  return `<g transform=\"translate(${-(x_trans / 2 + 10)},${height / 2})\"><text x=\"0\" text-anchor=\"middle\" transform=\"rotate(-90 0,0)\" class=\"plot_yaxis_title\" y=\"0\"><tspan>${title}</tspan></text></g>`;\n}\nexport function get_red_line(dimensions, ranges_dates) {\n  let x_frame = dimensions.width / (ranges_dates.max_x - 1); // console.log(\"%%%%\")\n  // console.log(dimensions)\n  // console.log(ranges_dates)\n  // let x = x_frame * 256;\n\n  let x = x_frame * (dimensions.historical_data_length - 1);\n  return `<g>\n        <path fill=\"none\" class=\"plot_pointer_line\" d=\"M ${x} 0 L ${x} ${dimensions.height}\" stroke-dasharray=\"6\" data-z-index=\"0\"></path>\n    </g>`;\n}\nexport function get_mark_line(mark_line, height) {\n  return `<g transform=\"translate(${mark_line.pos}, 0)\">\n        <path fill=\"none\" data-z-index=\"0\" class=\"plot_mark_line\" d=\"M 0 0 L 0 ${height}\" visibility=\"${mark_line.visibility}\" />         \n    </g>`;\n} // export function get_info_box2(info_box, box_width, box_height){ \n//     let y_data = [];\n//     // console.log(info_box.value_y)\n//     if(info_box !== undefined && info_box.value_y !== undefined) {\n//         for(let i=0; i<info_box.colors.length; i++){\n//             y_data.push(`<path fill=\"none\" d=\"M 5 ${(i + 1)*25 + 22} L 20 ${(i + 1)*25 + 22}\" stroke=\"${info_box.colors[i]}\" strokeWidth=\"2\" opacity=\"1\"></path>\n//             <text stroke=\"#343640\" opacity=\"1\" x=25 y=${(i + 1)*25 + 25}>Series ${i + 1} value y: ${info_box.value_y[2][i]}</text>`)\n//         }\n//     }\n//     let date = formatDate(info_box.value_x)\n//     return `<g transform=\"translate(${info_box.pos_x}, ${info_box.pos_y})\" data-z-index=\"1\" class=\"plot_info_box\" visibility=${info_box.visibility}>\n//         <rect x=\"0\" y=\"0\" width=${box_width} height=${box_height}  />   \n//         <text x=5 y=\"25\" class=\"plot_info_box_header\">Date: ${date}</text>\n//         ${y_data}\n//     </g>`\n// }\n// export function get_y_axis(x, y, height){\n//     let line = `M ${x} ${y} L ${x} ${y + height}`;\n//     return `<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`\n// }\n// <text x=25 y=${(i + 1)*25 + 25}>${capitalizeString(keywords[i])} </text>`)\n\nexport function get_info_box(info_box, box_width, box_height, keywords) {\n  let y_data = [];\n\n  if (info_box !== undefined && info_box.value_y !== undefined) {\n    for (let i = 0; i < info_box.colors.length; i++) {\n      if (info_box.value_y[3][i] !== null && info_box.value_y[2][i] !== null) {\n        y_data.push(`<path fill=\"none\" d=\"M 5 ${(i + 1) * 25 + 22} L 20 ${(i + 1) * 25 + 22}\" stroke=\"${info_box.colors[i]}\" strokeWidth=\"2\" opacity=\"1\"></path>\n                <text x=25 y=${(i + 1) * 25 + 25}>${capitalizeString(keywords[i])} ${info_box.value_y[2][i].toFixed(1)} (min: ${info_box.value_y[3][i].toFixed(1)} | max: ${info_box.value_y[4][i].toFixed(1)})</text>`);\n      } else {\n        y_data.push(`<path fill=\"none\" d=\"M 5 ${(i + 1) * 25 + 22} L 20 ${(i + 1) * 25 + 22}\" stroke=\"${info_box.colors[i]}\" strokeWidth=\"2\" opacity=\"1\"></path>\n                \n                 <text x=25 y=${(i + 1) * 25 + 25}>${capitalizeString(keywords[i])} ${info_box.value_y[2][i].toFixed(1)}</text>`);\n      }\n    }\n  }\n\n  let date = formatDate(info_box.value_x);\n  return `<g transform=\"translate(${info_box.pos_x}, ${info_box.pos_y})\" data-z-index=\"1\" class=\"plot_info_box\" visibility=${info_box.visibility}>\n        <rect x=\"0\" y=\"0\" width=${box_width} height=${box_height}  />   \n        <g class=\"plot_info_box_header\">\n        <text x=5 y=\"25\">Date: ${date}</text>\n        </g>\n        ${y_data}\n    </g>`;\n}\nexport function prepare_legend(dimensions, colors, keywords) {\n  let legend = [];\n  let keyword_sizes = [];\n\n  if (dimensions.width2 > 700) {\n    for (let i = 0; i < colors.length; i++) {\n      let l = calculate_translate_for_legend(keywords[i].length);\n      let translation = keyword_sizes.reduce((a, b) => a + b, 0);\n      legend.push(`\n                <g data-z-index=\"1\" transform=\"translate(${translation},3)\">\n                    <path fill=\"none\" d=\"M 0 11 L 30 11\" stroke=${colors[i]} stroke-width=\"0\"></path>\n                    <text x=\"35\" textAnchor=\"start\" data-z-index=\"0\" y=\"15\" font-size=\"12px\" stroke=\"#6c757d\" stroke-width=\"0\">${capitalizeString(keywords[i])}</text>\n                </g>\n            `);\n      keyword_sizes.push(l);\n    }\n\n    let translation = keyword_sizes.reduce((a, b) => a + b, 0);\n    let width_trans = dimensions.width2 / 2 - translation / 2 - dimensions.x_trans;\n    let height_trans = dimensions.height + dimensions.y_trans / 2;\n    height_trans = dimensions.height + dimensions.y_trans - dimensions.y_trans2;\n    height_trans = dimensions.height + dimensions.y_trans - 25;\n    return `\n            <g transform=\"translate(${width_trans}, ${height_trans})\" class=\"plot_legend\" >\n                ${legend}\n            </g>`;\n  } else {\n    for (let i = 0; i < keywords.length; i++) {\n      let l = calculate_translate_for_legend(keywords[i].length);\n      keyword_sizes.push(l);\n    }\n\n    for (let i = 0; i < colors.length; i++) {\n      // let l = calculate_translate_for_legend(keywords[i].length);\n      let trans = Math.max(...keyword_sizes);\n      legend.push(`\n                <g data-z-index=\"1\" transform=\"translate(${dimensions.width / 2 - trans / 2}, ${i * 18 + 10})\">\n                    <path fill=\"none\" d=\"M 0 11 L 30 11\" stroke=${colors[i]} stroke-width=\"0\"></path>\n                    <text x=\"35\" textAnchor=\"start\" data-z-index=\"0\" y=\"15\" font-size=\"12px\" stroke=\"#6c757d\" stroke-width=\"0\">${capitalizeString(keywords[i])}</text>\n                </g>\n            `);\n    }\n\n    let height_trans = dimensions.height + 43;\n    return `\n            <g transform=\"translate(${0}, ${height_trans})\" class=\"plot_legend\" >\n                ${legend}\n            </g>`;\n  }\n}\n\nfunction calculate_translate_for_legend(keyword_length) {\n  return (6, 5) * keyword_length + 55;\n}\n\nfunction formatDate(d) {\n  let date = new Date(d);\n  var dd = date.getDate();\n  var mm = date.getMonth() + 1;\n  var yyyy = date.getFullYear();\n\n  if (dd < 10) {\n    dd = '0' + dd;\n  }\n\n  if (mm < 10) {\n    mm = '0' + mm;\n  }\n\n  ;\n  return d = dd + '-' + mm + '-' + yyyy;\n}\n\nfunction formatDate_monthly(d) {\n  let date = new Date(d);\n  var dd = date.getDate();\n  var mm = date.getMonth() + 1;\n  var yyyy = date.getFullYear();\n\n  if (dd < 10) {\n    dd = '0' + dd;\n  }\n\n  if (mm < 10) {\n    mm = '0' + mm;\n  }\n\n  ;\n  return d = mm + '-' + yyyy;\n} // function capitalizeString(string) {\n//     return string.charAt(0).toUpperCase() + string.slice(1);\n// }","map":{"version":3,"sources":["/Users/marcin/workspace/react/flask-react-app/client/src/utils_dates/graphics.js"],"names":["capitalizeString","make_line","point","width","line","make_yy_tick","x","y","get_lines","height","lines_number","frame","result","i","push","get_y_ticks","make_x_tick","get_ticks","ticks_number","make_y_tick","value","get_y_axis","lower_index","upper_index","difference","Math","abs","prepare_title","title","x_trans","y_trans","prepare_x_axis","data_mock","length","Object","keys","data_frame","floor","formatDate_monthly","formatDate","height_trans","get_y_axis_label","get_red_line","dimensions","ranges_dates","x_frame","max_x","historical_data_length","get_mark_line","mark_line","pos","visibility","get_info_box","info_box","box_width","box_height","keywords","y_data","undefined","value_y","colors","toFixed","date","value_x","pos_x","pos_y","prepare_legend","legend","keyword_sizes","width2","l","calculate_translate_for_legend","translation","reduce","a","b","width_trans","y_trans2","trans","max","keyword_length","d","Date","dd","getDate","mm","getMonth","yyyy","getFullYear"],"mappings":"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","sourcesContent":["import { capitalizeString } from \"./functions\";\n\n\nfunction make_line (point, width) {\n\n    let line = `M 0 ${point} H ${width}`;\n    return `<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`\n}\n\nfunction make_yy_tick(x, y) {\n\n    let line = `M ${x-10} ${y} L ${x} ${y}`;\n    // return `<path class=\"plot_xmark\" d=\"${line}\" data-z-index=\"0\" />`\n    return `<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`\n}\n\nexport function get_lines (width, height, lines_number) {\n\n    let frame = height / lines_number;\n\n    let result = [];\n\n    for (let i=lines_number; i<=lines_number; i++){\n        let point = frame * i;\n        result.push(make_line(point,width))\n    }\n\n    return result;\n}\n\nexport function get_y_ticks (height, lines_number) {\n    let result = []\n\n    let frame = height / lines_number;\n\n    for (let i=0; i<=lines_number; i++){\n        let point = frame * i;\n        result.push(make_yy_tick(0,point))\n    }\n\n    return result\n}\n\n\nfunction make_x_tick(x, y) {\n\n    let line = `M ${x} ${y} L ${x} ${y + 10}`;\n    return `<path class=\"plot_xmark\" d=\"${line}\" data-z-index=\"0\" />`\n}\n\nexport function get_ticks(width, height, ticks_number){\n    let result = [];\n\n    let frame = width / (ticks_number - 1);\n\n    for (let i=0; i<ticks_number; i++){\n        let point = frame * i;\n        result.push(make_x_tick(point, height))\n    }\n\n    // let frame = width / (length - 1)\n    // for(let i=0; i<ticks_number; i++){\n    //     // result.push(`<text x=\"${frame*i}\" class=\"plot_xtick\" text-anchor=\"middle\" y=\"${height + 30}\">${formatDate_monthly(data_mock[data_frame*i][1])}</text>`)\n    //     result.push(`<text x=\"${frame*i}\" class=\"plot_xtick\" text-anchor=\"middle\" y=\"${height + 30}\">${formatDate_monthly(data_mock[i][1])}</text>`)\n    // }\n\n    return result;\n}\n\nfunction make_y_tick(x, y, value) {\n    return `<text x=\"${x}\" text-anchor=\"end\" class=\"plot_ytick\" y=\"${y}\">${value}</text>`\n}\n\nexport function get_y_axis(x, y, height, lower_index, upper_index) {\n    let result = [];\n\n    let lines_number = upper_index - lower_index;\n\n    let frame = height / lines_number;\n\n    // let lower_index = 10 - lines_number;\n\n    let difference = Math.abs(lower_index)\n\n    // for(let i=0; i<=lines_number; i++){\n    //     result.push(make_y_tick(-20, height - frame*(i),i * 10));\n    // }\n\n    for(let i=0; i<=lines_number; i++){\n        result.push(make_y_tick(-20, height - frame*(i ),i * 10));\n    }\n\n    let line = `M ${x} ${y} L ${x} ${y + height}`;\n    result.push(`<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`)\n\n    return result;\n}\n\nexport function prepare_title(title, width, height, x_trans, y_trans){\n    return `<text x=\"${width/2}\" class=\"plot_title\" text-anchor=\"middle\" y=\"${-y_trans/3}\">${title}</text>`\n}\n\n\n\nexport function prepare_x_axis(width, height, ticks_number, data_mock, title, y_trans){\n    let result = []\n\n    let length = Object.keys(data_mock).length;\n    let data_frame = Math.floor(length/(ticks_number-1));\n\n    let frame = width / (ticks_number - 1)\n\n    if(width<=700){\n        for(let i=0; i<ticks_number; i++){\n            result.push(`<text x=\"${frame*i}\" class=\"plot_xtick\" text-anchor=\"middle\" y=\"${height + 25}\">${formatDate_monthly(data_mock[data_frame*i][1])}</text>`)\n        }\n    }else{\n        for(let i=0; i<ticks_number; i++){\n            result.push(`<text x=\"${frame*i}\" class=\"plot_xtick\" text-anchor=\"middle\" y=\"${height + 25}\">${formatDate(data_mock[data_frame*i][1])}</text>`)\n        }\n    }\n\n    let line = `M 0 ${height} H ${width}`;\n\n    // console.log(\"***\")\n    // console.log(height)\n    // console.log(y_trans)\n\n    let height_trans = y_trans\n    // if(width>800){\n    //     height_trans = height_trans/2\n    // }\n\n    if(width>700){\n        result.push(`<text x=\"${width/2}\" text-anchor=\"middle\" class=\"plot_xaxis_title\" y=\"${height + height_trans - 30}\"><tspan>${title}</tspan></text>`)\n    }else{\n        result.push(`<text x=\"${width/2}\" text-anchor=\"middle\" class=\"plot_xaxis_title\" y=\"${height +40}\"><tspan>${title}</tspan></text>`)\n    }\n    result.push(`<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`)\n    \n    \n\n    return result \n\n}\n\n// export function get_x_axis(title, width, height, x_trans, y_trans){\n//     let result = []\n//     let line = `M 0 ${height} H ${width}`;\n\n//     // console.log(\"***\")\n//     // console.log(y_trans)\n//     let height_trans = y_trans\n//     if(width>800){\n//         height_trans = height_trans/2\n//     }\n\n//     result.push(`<text x=\"${width/2}\" text-anchor=\"middle\" class=\"plot_xaxis_title\" y=\"${height + height_trans + 10}\"><tspan>${title}</tspan></text>`)\n//     result.push(`<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`)\n    \n//     return result\n// }\n\nexport function get_y_axis_label(title, height, x_trans){\n    return `<g transform=\"translate(${-(x_trans/2 + 10)},${height/2})\"><text x=\"0\" text-anchor=\"middle\" transform=\"rotate(-90 0,0)\" class=\"plot_yaxis_title\" y=\"0\"><tspan>${title}</tspan></text></g>`\n}\n\nexport function get_red_line(dimensions, ranges_dates){\n\n    let x_frame = dimensions.width/(ranges_dates.max_x-1)\n\n    // console.log(\"%%%%\")\n    // console.log(dimensions)\n    // console.log(ranges_dates)\n\n    // let x = x_frame * 256;\n    let x = x_frame * (dimensions.historical_data_length - 1);\n\n\n    return `<g>\n        <path fill=\"none\" class=\"plot_pointer_line\" d=\"M ${x} 0 L ${x} ${dimensions.height}\" stroke-dasharray=\"6\" data-z-index=\"0\"></path>\n    </g>`\n}\n\nexport function get_mark_line(mark_line, height){\n    return `<g transform=\"translate(${mark_line.pos}, 0)\">\n        <path fill=\"none\" data-z-index=\"0\" class=\"plot_mark_line\" d=\"M 0 0 L 0 ${height}\" visibility=\"${mark_line.visibility}\" />         \n    </g>`\n}\n\n// export function get_info_box2(info_box, box_width, box_height){ \n\n//     let y_data = [];\n//     // console.log(info_box.value_y)\n    \n//     if(info_box !== undefined && info_box.value_y !== undefined) {\n//         for(let i=0; i<info_box.colors.length; i++){\n//             y_data.push(`<path fill=\"none\" d=\"M 5 ${(i + 1)*25 + 22} L 20 ${(i + 1)*25 + 22}\" stroke=\"${info_box.colors[i]}\" strokeWidth=\"2\" opacity=\"1\"></path>\n//             <text stroke=\"#343640\" opacity=\"1\" x=25 y=${(i + 1)*25 + 25}>Series ${i + 1} value y: ${info_box.value_y[2][i]}</text>`)\n//         }\n//     }\n\n//     let date = formatDate(info_box.value_x)\n    \n//     return `<g transform=\"translate(${info_box.pos_x}, ${info_box.pos_y})\" data-z-index=\"1\" class=\"plot_info_box\" visibility=${info_box.visibility}>\n//         <rect x=\"0\" y=\"0\" width=${box_width} height=${box_height}  />   \n//         <text x=5 y=\"25\" class=\"plot_info_box_header\">Date: ${date}</text>\n//         ${y_data}\n//     </g>`\n// }\n\n// export function get_y_axis(x, y, height){\n//     let line = `M ${x} ${y} L ${x} ${y + height}`;\n//     return `<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`\n// }\n\n// <text x=25 y=${(i + 1)*25 + 25}>${capitalizeString(keywords[i])} </text>`)\n\nexport function get_info_box(info_box, box_width, box_height, keywords){ \n\n    let y_data = [];\n    \n    if(info_box !== undefined && info_box.value_y !== undefined) {\n        for(let i=0; i<info_box.colors.length; i++){\n            \n            if(info_box.value_y[3][i] !== null && info_box.value_y[2][i] !== null){\n                y_data.push(`<path fill=\"none\" d=\"M 5 ${(i + 1)*25 + 22} L 20 ${(i + 1)*25 + 22}\" stroke=\"${info_box.colors[i]}\" strokeWidth=\"2\" opacity=\"1\"></path>\n                <text x=25 y=${(i + 1)*25 + 25}>${capitalizeString(keywords[i])} ${info_box.value_y[2][i].toFixed(1)} (min: ${info_box.value_y[3][i].toFixed(1)} | max: ${info_box.value_y[4][i].toFixed(1)})</text>`)\n            } else {\n                y_data.push(`<path fill=\"none\" d=\"M 5 ${(i + 1)*25 + 22} L 20 ${(i + 1)*25 + 22}\" stroke=\"${info_box.colors[i]}\" strokeWidth=\"2\" opacity=\"1\"></path>\n                \n                 <text x=25 y=${(i + 1)*25 + 25}>${capitalizeString(keywords[i])} ${info_box.value_y[2][i].toFixed(1)}</text>`)\n            }\n\n            \n        }\n    }\n\n    let date = formatDate(info_box.value_x)\n    \n    return `<g transform=\"translate(${info_box.pos_x}, ${info_box.pos_y})\" data-z-index=\"1\" class=\"plot_info_box\" visibility=${info_box.visibility}>\n        <rect x=\"0\" y=\"0\" width=${box_width} height=${box_height}  />   \n        <g class=\"plot_info_box_header\">\n        <text x=5 y=\"25\">Date: ${date}</text>\n        </g>\n        ${y_data}\n    </g>`\n}\n\nexport function prepare_legend(dimensions, colors, keywords){\n\n    let legend = [];\n    let keyword_sizes = []\n\n    if (dimensions.width2>700){\n        for(let i=0; i<colors.length; i++){\n            let l = calculate_translate_for_legend(keywords[i].length);\n            \n    \n            let translation = keyword_sizes.reduce((a, b) => a + b, 0);\n    \n            legend.push(`\n                <g data-z-index=\"1\" transform=\"translate(${translation},3)\">\n                    <path fill=\"none\" d=\"M 0 11 L 30 11\" stroke=${colors[i]} stroke-width=\"0\"></path>\n                    <text x=\"35\" textAnchor=\"start\" data-z-index=\"0\" y=\"15\" font-size=\"12px\" stroke=\"#6c757d\" stroke-width=\"0\">${capitalizeString(keywords[i])}</text>\n                </g>\n            `);\n            keyword_sizes.push(l);\n        }\n\n        let translation = keyword_sizes.reduce((a, b) => a + b, 0);\n        let width_trans = (dimensions.width2)/2 - translation/2 - dimensions.x_trans;\n        let height_trans = dimensions.height + dimensions.y_trans/2;\n        height_trans = dimensions.height + dimensions.y_trans - dimensions.y_trans2;\n        height_trans = dimensions.height + dimensions.y_trans - 25;\n    \n        return `\n            <g transform=\"translate(${width_trans}, ${height_trans})\" class=\"plot_legend\" >\n                ${legend}\n            </g>`\n        \n    } else {\n        for(let i=0; i<keywords.length; i++){\n            let l = calculate_translate_for_legend(keywords[i].length);\n            keyword_sizes.push(l);\n        }\n\n        for(let i=0; i<colors.length; i++){\n            // let l = calculate_translate_for_legend(keywords[i].length);\n\n            let trans = Math.max(...keyword_sizes);\n    \n            legend.push(`\n                <g data-z-index=\"1\" transform=\"translate(${(dimensions.width)/2 - trans/2}, ${i*18+10})\">\n                    <path fill=\"none\" d=\"M 0 11 L 30 11\" stroke=${colors[i]} stroke-width=\"0\"></path>\n                    <text x=\"35\" textAnchor=\"start\" data-z-index=\"0\" y=\"15\" font-size=\"12px\" stroke=\"#6c757d\" stroke-width=\"0\">${capitalizeString(keywords[i])}</text>\n                </g>\n            `);\n        }\n\n        let height_trans = dimensions.height + 43;\n    \n        return `\n            <g transform=\"translate(${0}, ${height_trans})\" class=\"plot_legend\" >\n                ${legend}\n            </g>`\n    }\n}\n\nfunction calculate_translate_for_legend(keyword_length){\n    return (6,5)*keyword_length + 55;\n}\n\nfunction formatDate(d)\n {\n  let date = new Date(d)\n  var dd = date.getDate(); \n  var mm = date.getMonth()+1;\n  var yyyy = date.getFullYear(); \n  if(dd<10){dd='0'+dd} \n  if(mm<10){mm='0'+mm};\n  return d = dd+'-'+mm+'-'+yyyy\n}\n\nfunction formatDate_monthly(d)\n {\n  let date = new Date(d)\n  var dd = date.getDate(); \n  var mm = date.getMonth()+1;\n  var yyyy = date.getFullYear(); \n  if(dd<10){dd='0'+dd} \n  if(mm<10){mm='0'+mm};\n  return d = mm+'-'+yyyy\n}\n\n// function capitalizeString(string) {\n//     return string.charAt(0).toUpperCase() + string.slice(1);\n// }\n"]},"metadata":{},"sourceType":"module"}