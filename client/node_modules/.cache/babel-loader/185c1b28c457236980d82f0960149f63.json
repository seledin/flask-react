{"ast":null,"code":"import{capitalizeString}from\"./functions\";function make_line(point,width){var line=\"M 0 \".concat(point,\" H \").concat(width);return\"<path d=\\\"\".concat(line,\"\\\" fill=\\\"none\\\" class=\\\"plot_line\\\" data-z-index=\\\"0\\\" />\");}function make_yy_tick(x,y){var line=\"M \".concat(x-10,\" \").concat(y,\" L \").concat(x,\" \").concat(y);// return `<path class=\"plot_xmark\" d=\"${line}\" data-z-index=\"0\" />`\nreturn\"<path d=\\\"\".concat(line,\"\\\" fill=\\\"none\\\" class=\\\"plot_line\\\" data-z-index=\\\"0\\\" />\");}export function get_lines(width,height,lines_number){var frame=height/lines_number;var result=[];for(var i=lines_number;i<=lines_number;i++){var point=frame*i;result.push(make_line(point,width));}return result;}export function get_y_ticks(height,lines_number){var result=[];var frame=height/lines_number;for(var i=0;i<=lines_number;i++){var point=frame*i;result.push(make_yy_tick(0,point));}return result;}function make_x_tick(x,y){var line=\"M \".concat(x,\" \").concat(y,\" L \").concat(x,\" \").concat(y+10);return\"<path class=\\\"plot_xmark\\\" d=\\\"\".concat(line,\"\\\" data-z-index=\\\"0\\\" />\");}export function get_ticks(width,height,ticks_number){var result=[];var frame=width/(ticks_number-1);for(var i=0;i<ticks_number;i++){var point=frame*i;result.push(make_x_tick(point,height));}// let frame = width / (length - 1)\n// for(let i=0; i<ticks_number; i++){\n//     // result.push(`<text x=\"${frame*i}\" class=\"plot_xtick\" text-anchor=\"middle\" y=\"${height + 30}\">${formatDate_monthly(data_mock[data_frame*i][1])}</text>`)\n//     result.push(`<text x=\"${frame*i}\" class=\"plot_xtick\" text-anchor=\"middle\" y=\"${height + 30}\">${formatDate_monthly(data_mock[i][1])}</text>`)\n// }\nreturn result;}function make_y_tick(x,y,value){return\"<text x=\\\"\".concat(x,\"\\\" text-anchor=\\\"end\\\" class=\\\"plot_ytick\\\" y=\\\"\").concat(y,\"\\\">\").concat(value,\"</text>\");}export function get_y_axis(x,y,height,lower_index,upper_index){var result=[];var lines_number=lower_index+upper_index;var frame=height/lines_number;// let lower_index = 10 - lines_number;\nvar difference=Math.abs(lower_index);// for(let i=0; i<=lines_number; i++){\n//     result.push(make_y_tick(-20, height - frame*(i),i * 10));\n// }\nfor(var i=-lower_index;i<=upper_index;i++){result.push(make_y_tick(-20,height-frame*(i+difference),i*10));}var line=\"M \".concat(x,\" \").concat(y,\" L \").concat(x,\" \").concat(y+height);result.push(\"<path d=\\\"\".concat(line,\"\\\" fill=\\\"none\\\" class=\\\"plot_line\\\" data-z-index=\\\"0\\\" />\"));return result;}export function prepare_title(title,width,height,x_trans,y_trans){return\"<text x=\\\"\".concat(width/2,\"\\\" class=\\\"plot_title\\\" text-anchor=\\\"middle\\\" y=\\\"\").concat(-y_trans/3,\"\\\">\").concat(title,\"</text>\");}export function prepare_x_axis(width,height,ticks_number,data_mock,title,y_trans){var result=[];var length=Object.keys(data_mock).length;var data_frame=Math.floor(length/(ticks_number-1));var frame=width/(ticks_number-1);if(width<=700){for(var i=0;i<ticks_number;i++){result.push(\"<text x=\\\"\".concat(frame*i,\"\\\" class=\\\"plot_xtick\\\" text-anchor=\\\"middle\\\" y=\\\"\").concat(height+25,\"\\\">\").concat(formatDate_monthly(data_mock[data_frame*i][1]),\"</text>\"));}}else{for(var _i=0;_i<ticks_number;_i++){result.push(\"<text x=\\\"\".concat(frame*_i,\"\\\" class=\\\"plot_xtick\\\" text-anchor=\\\"middle\\\" y=\\\"\").concat(height+25,\"\\\">\").concat(formatDate(data_mock[data_frame*_i][1]),\"</text>\"));}}var line=\"M 0 \".concat(height,\" H \").concat(width);// console.log(\"***\")\n// console.log(height)\n// console.log(y_trans)\nvar height_trans=y_trans;// if(width>800){\n//     height_trans = height_trans/2\n// }\nif(width>700){result.push(\"<text x=\\\"\".concat(width/2,\"\\\" text-anchor=\\\"middle\\\" class=\\\"plot_xaxis_title\\\" y=\\\"\").concat(height+height_trans-30,\"\\\"><tspan>\").concat(title,\"</tspan></text>\"));}else{result.push(\"<text x=\\\"\".concat(width/2,\"\\\" text-anchor=\\\"middle\\\" class=\\\"plot_xaxis_title\\\" y=\\\"\").concat(height+40,\"\\\"><tspan>\").concat(title,\"</tspan></text>\"));}result.push(\"<path d=\\\"\".concat(line,\"\\\" fill=\\\"none\\\" class=\\\"plot_line\\\" data-z-index=\\\"0\\\" />\"));return result;}// export function get_x_axis(title, width, height, x_trans, y_trans){\n//     let result = []\n//     let line = `M 0 ${height} H ${width}`;\n//     // console.log(\"***\")\n//     // console.log(y_trans)\n//     let height_trans = y_trans\n//     if(width>800){\n//         height_trans = height_trans/2\n//     }\n//     result.push(`<text x=\"${width/2}\" text-anchor=\"middle\" class=\"plot_xaxis_title\" y=\"${height + height_trans + 10}\"><tspan>${title}</tspan></text>`)\n//     result.push(`<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`)\n//     return result\n// }\nexport function get_y_axis_label(title,height,x_trans){return\"<g transform=\\\"translate(\".concat(-(x_trans/2+10),\",\").concat(height/2,\")\\\"><text x=\\\"0\\\" text-anchor=\\\"middle\\\" transform=\\\"rotate(-90 0,0)\\\" class=\\\"plot_yaxis_title\\\" y=\\\"0\\\"><tspan>\").concat(title,\"</tspan></text></g>\");}export function get_red_line(dimensions,ranges_dates){var x_frame=dimensions.width/(ranges_dates.max_x-1);// console.log(\"%%%%\")\n// console.log(dimensions)\n// console.log(ranges_dates)\n// let x = x_frame * 256;\nvar x=x_frame*(dimensions.historical_data_length-1);return\"<g>\\n        <path fill=\\\"none\\\" class=\\\"plot_pointer_line\\\" d=\\\"M \".concat(x,\" 0 L \").concat(x,\" \").concat(dimensions.height,\"\\\" stroke-dasharray=\\\"6\\\" data-z-index=\\\"0\\\"></path>\\n    </g>\");}export function get_mark_line(mark_line,height){return\"<g transform=\\\"translate(\".concat(mark_line.pos,\", 0)\\\">\\n        <path fill=\\\"none\\\" data-z-index=\\\"0\\\" class=\\\"plot_mark_line\\\" d=\\\"M 0 0 L 0 \").concat(height,\"\\\" visibility=\\\"\").concat(mark_line.visibility,\"\\\" />         \\n    </g>\");}// export function get_info_box2(info_box, box_width, box_height){ \n//     let y_data = [];\n//     // console.log(info_box.value_y)\n//     if(info_box !== undefined && info_box.value_y !== undefined) {\n//         for(let i=0; i<info_box.colors.length; i++){\n//             y_data.push(`<path fill=\"none\" d=\"M 5 ${(i + 1)*25 + 22} L 20 ${(i + 1)*25 + 22}\" stroke=\"${info_box.colors[i]}\" strokeWidth=\"2\" opacity=\"1\"></path>\n//             <text stroke=\"#343640\" opacity=\"1\" x=25 y=${(i + 1)*25 + 25}>Series ${i + 1} value y: ${info_box.value_y[2][i]}</text>`)\n//         }\n//     }\n//     let date = formatDate(info_box.value_x)\n//     return `<g transform=\"translate(${info_box.pos_x}, ${info_box.pos_y})\" data-z-index=\"1\" class=\"plot_info_box\" visibility=${info_box.visibility}>\n//         <rect x=\"0\" y=\"0\" width=${box_width} height=${box_height}  />   \n//         <text x=5 y=\"25\" class=\"plot_info_box_header\">Date: ${date}</text>\n//         ${y_data}\n//     </g>`\n// }\n// export function get_y_axis(x, y, height){\n//     let line = `M ${x} ${y} L ${x} ${y + height}`;\n//     return `<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`\n// }\n// <text x=25 y=${(i + 1)*25 + 25}>${capitalizeString(keywords[i])} </text>`)\nexport function get_info_box(info_box,box_width,box_height,keywords){var y_data=[];if(info_box!==undefined&&info_box.value_y!==undefined){for(var i=0;i<info_box.colors.length;i++){if(info_box.value_y[3][i]!==null&&info_box.value_y[2][i]!==null){y_data.push(\"<path fill=\\\"none\\\" d=\\\"M 5 \".concat((i+1)*25+22,\" L 20 \").concat((i+1)*25+22,\"\\\" stroke=\\\"\").concat(info_box.colors[i],\"\\\" strokeWidth=\\\"2\\\" opacity=\\\"1\\\"></path>\\n                <text x=25 y=\").concat((i+1)*25+25,\">\").concat(capitalizeString(keywords[i]),\" \").concat(info_box.value_y[2][i].toFixed(1),\" (min: \").concat(info_box.value_y[3][i].toFixed(1),\" | max: \").concat(info_box.value_y[4][i].toFixed(1),\")</text>\"));}else{y_data.push(\"<path fill=\\\"none\\\" d=\\\"M 5 \".concat((i+1)*25+22,\" L 20 \").concat((i+1)*25+22,\"\\\" stroke=\\\"\").concat(info_box.colors[i],\"\\\" strokeWidth=\\\"2\\\" opacity=\\\"1\\\"></path>\\n                \\n                 <text x=25 y=\").concat((i+1)*25+25,\">\").concat(capitalizeString(keywords[i]),\" \").concat(info_box.value_y[2][i].toFixed(1),\"</text>\"));}}}var date=formatDate(info_box.value_x);return\"<g transform=\\\"translate(\".concat(info_box.pos_x,\", \").concat(info_box.pos_y,\")\\\" data-z-index=\\\"1\\\" class=\\\"plot_info_box\\\" visibility=\").concat(info_box.visibility,\">\\n        <rect x=\\\"0\\\" y=\\\"0\\\" width=\").concat(box_width,\" height=\").concat(box_height,\"  />   \\n        <g class=\\\"plot_info_box_header\\\">\\n        <text x=5 y=\\\"25\\\">Date: \").concat(date,\"</text>\\n        </g>\\n        \").concat(y_data,\"\\n    </g>\");}export function prepare_legend(dimensions,colors,keywords){var legend=[];var keyword_sizes=[];if(dimensions.width2>700){for(var i=0;i<colors.length;i++){var l=calculate_translate_for_legend(keywords[i].length);var _translation=keyword_sizes.reduce(function(a,b){return a+b;},0);legend.push(\"\\n                <g data-z-index=\\\"1\\\" transform=\\\"translate(\".concat(_translation,\",3)\\\">\\n                    <path fill=\\\"none\\\" d=\\\"M 0 11 L 30 11\\\" stroke=\").concat(colors[i],\" stroke-width=\\\"0\\\"></path>\\n                    <text x=\\\"35\\\" textAnchor=\\\"start\\\" data-z-index=\\\"0\\\" y=\\\"15\\\" font-size=\\\"12px\\\" stroke=\\\"#6c757d\\\" stroke-width=\\\"0\\\">\").concat(capitalizeString(keywords[i]),\"</text>\\n                </g>\\n            \"));keyword_sizes.push(l);}var translation=keyword_sizes.reduce(function(a,b){return a+b;},0);var width_trans=dimensions.width2/2-translation/2-dimensions.x_trans;var height_trans=dimensions.height+dimensions.y_trans/2;height_trans=dimensions.height+dimensions.y_trans-dimensions.y_trans2;height_trans=dimensions.height+dimensions.y_trans-25;return\"\\n            <g transform=\\\"translate(\".concat(width_trans,\", \").concat(height_trans,\")\\\" class=\\\"plot_legend\\\" >\\n                \").concat(legend,\"\\n            </g>\");}else{for(var _i2=0;_i2<keywords.length;_i2++){var _l=calculate_translate_for_legend(keywords[_i2].length);keyword_sizes.push(_l);}for(var _i3=0;_i3<colors.length;_i3++){// let l = calculate_translate_for_legend(keywords[i].length);\nvar trans=Math.max.apply(Math,keyword_sizes);legend.push(\"\\n                <g data-z-index=\\\"1\\\" transform=\\\"translate(\".concat(dimensions.width/2-trans/2,\", \").concat(_i3*18+10,\")\\\">\\n                    <path fill=\\\"none\\\" d=\\\"M 0 11 L 30 11\\\" stroke=\").concat(colors[_i3],\" stroke-width=\\\"0\\\"></path>\\n                    <text x=\\\"35\\\" textAnchor=\\\"start\\\" data-z-index=\\\"0\\\" y=\\\"15\\\" font-size=\\\"12px\\\" stroke=\\\"#6c757d\\\" stroke-width=\\\"0\\\">\").concat(capitalizeString(keywords[_i3]),\"</text>\\n                </g>\\n            \"));}var _height_trans=dimensions.height+43;return\"\\n            <g transform=\\\"translate(\".concat(0,\", \",_height_trans,\")\\\" class=\\\"plot_legend\\\" >\\n                \").concat(legend,\"\\n            </g>\");}}function calculate_translate_for_legend(keyword_length){return(6,5)*keyword_length+55;}function formatDate(d){var date=new Date(d);var dd=date.getDate();var mm=date.getMonth()+1;var yyyy=date.getFullYear();if(dd<10){dd='0'+dd;}if(mm<10){mm='0'+mm;};return d=dd+'-'+mm+'-'+yyyy;}function formatDate_monthly(d){var date=new Date(d);var dd=date.getDate();var mm=date.getMonth()+1;var yyyy=date.getFullYear();if(dd<10){dd='0'+dd;}if(mm<10){mm='0'+mm;};return d=mm+'-'+yyyy;}// function capitalizeString(string) {\n//     return string.charAt(0).toUpperCase() + string.slice(1);\n// }","map":{"version":3,"sources":["/Users/marcin/workspace/react/flask-react-app/client/src/utils_dates/graphics.js"],"names":["capitalizeString","make_line","point","width","line","make_yy_tick","x","y","get_lines","height","lines_number","frame","result","i","push","get_y_ticks","make_x_tick","get_ticks","ticks_number","make_y_tick","value","get_y_axis","lower_index","upper_index","difference","Math","abs","prepare_title","title","x_trans","y_trans","prepare_x_axis","data_mock","length","Object","keys","data_frame","floor","formatDate_monthly","formatDate","height_trans","get_y_axis_label","get_red_line","dimensions","ranges_dates","x_frame","max_x","historical_data_length","get_mark_line","mark_line","pos","visibility","get_info_box","info_box","box_width","box_height","keywords","y_data","undefined","value_y","colors","toFixed","date","value_x","pos_x","pos_y","prepare_legend","legend","keyword_sizes","width2","l","calculate_translate_for_legend","translation","reduce","a","b","width_trans","y_trans2","trans","max","keyword_length","d","Date","dd","getDate","mm","getMonth","yyyy","getFullYear"],"mappings":"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","sourcesContent":["import { capitalizeString } from \"./functions\";\n\n\nfunction make_line (point, width) {\n\n    let line = `M 0 ${point} H ${width}`;\n    return `<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`\n}\n\nfunction make_yy_tick(x, y) {\n\n    let line = `M ${x-10} ${y} L ${x} ${y}`;\n    // return `<path class=\"plot_xmark\" d=\"${line}\" data-z-index=\"0\" />`\n    return `<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`\n}\n\nexport function get_lines (width, height, lines_number) {\n\n    let frame = height / lines_number;\n\n    let result = [];\n\n    for (let i=lines_number; i<=lines_number; i++){\n        let point = frame * i;\n        result.push(make_line(point,width))\n    }\n\n    return result;\n}\n\nexport function get_y_ticks (height, lines_number) {\n    let result = []\n\n    let frame = height / lines_number;\n\n    for (let i=0; i<=lines_number; i++){\n        let point = frame * i;\n        result.push(make_yy_tick(0,point))\n    }\n\n    return result\n}\n\n\nfunction make_x_tick(x, y) {\n\n    let line = `M ${x} ${y} L ${x} ${y + 10}`;\n    return `<path class=\"plot_xmark\" d=\"${line}\" data-z-index=\"0\" />`\n}\n\nexport function get_ticks(width, height, ticks_number){\n    let result = [];\n\n    let frame = width / (ticks_number - 1);\n\n    for (let i=0; i<ticks_number; i++){\n        let point = frame * i;\n        result.push(make_x_tick(point, height))\n    }\n\n    // let frame = width / (length - 1)\n    // for(let i=0; i<ticks_number; i++){\n    //     // result.push(`<text x=\"${frame*i}\" class=\"plot_xtick\" text-anchor=\"middle\" y=\"${height + 30}\">${formatDate_monthly(data_mock[data_frame*i][1])}</text>`)\n    //     result.push(`<text x=\"${frame*i}\" class=\"plot_xtick\" text-anchor=\"middle\" y=\"${height + 30}\">${formatDate_monthly(data_mock[i][1])}</text>`)\n    // }\n\n    return result;\n}\n\nfunction make_y_tick(x, y, value) {\n    return `<text x=\"${x}\" text-anchor=\"end\" class=\"plot_ytick\" y=\"${y}\">${value}</text>`\n}\n\nexport function get_y_axis(x, y, height, lower_index, upper_index) {\n    let result = [];\n\n    let lines_number = lower_index + upper_index;\n\n    let frame = height / lines_number;\n\n    // let lower_index = 10 - lines_number;\n\n    let difference = Math.abs(lower_index)\n\n    // for(let i=0; i<=lines_number; i++){\n    //     result.push(make_y_tick(-20, height - frame*(i),i * 10));\n    // }\n\n    for(let i=-lower_index; i<=upper_index; i++){\n        result.push(make_y_tick(-20, height - frame*(i + difference),i * 10));\n    }\n\n    let line = `M ${x} ${y} L ${x} ${y + height}`;\n    result.push(`<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`)\n\n    return result;\n}\n\nexport function prepare_title(title, width, height, x_trans, y_trans){\n    return `<text x=\"${width/2}\" class=\"plot_title\" text-anchor=\"middle\" y=\"${-y_trans/3}\">${title}</text>`\n}\n\n\n\nexport function prepare_x_axis(width, height, ticks_number, data_mock, title, y_trans){\n    let result = []\n\n    let length = Object.keys(data_mock).length;\n    let data_frame = Math.floor(length/(ticks_number-1));\n\n    let frame = width / (ticks_number - 1)\n\n    if(width<=700){\n        for(let i=0; i<ticks_number; i++){\n            result.push(`<text x=\"${frame*i}\" class=\"plot_xtick\" text-anchor=\"middle\" y=\"${height + 25}\">${formatDate_monthly(data_mock[data_frame*i][1])}</text>`)\n        }\n    }else{\n        for(let i=0; i<ticks_number; i++){\n            result.push(`<text x=\"${frame*i}\" class=\"plot_xtick\" text-anchor=\"middle\" y=\"${height + 25}\">${formatDate(data_mock[data_frame*i][1])}</text>`)\n        }\n    }\n\n    let line = `M 0 ${height} H ${width}`;\n\n    // console.log(\"***\")\n    // console.log(height)\n    // console.log(y_trans)\n\n    let height_trans = y_trans\n    // if(width>800){\n    //     height_trans = height_trans/2\n    // }\n\n    if(width>700){\n        result.push(`<text x=\"${width/2}\" text-anchor=\"middle\" class=\"plot_xaxis_title\" y=\"${height + height_trans - 30}\"><tspan>${title}</tspan></text>`)\n    }else{\n        result.push(`<text x=\"${width/2}\" text-anchor=\"middle\" class=\"plot_xaxis_title\" y=\"${height +40}\"><tspan>${title}</tspan></text>`)\n    }\n    result.push(`<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`)\n    \n    \n\n    return result \n\n}\n\n// export function get_x_axis(title, width, height, x_trans, y_trans){\n//     let result = []\n//     let line = `M 0 ${height} H ${width}`;\n\n//     // console.log(\"***\")\n//     // console.log(y_trans)\n//     let height_trans = y_trans\n//     if(width>800){\n//         height_trans = height_trans/2\n//     }\n\n//     result.push(`<text x=\"${width/2}\" text-anchor=\"middle\" class=\"plot_xaxis_title\" y=\"${height + height_trans + 10}\"><tspan>${title}</tspan></text>`)\n//     result.push(`<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`)\n    \n//     return result\n// }\n\nexport function get_y_axis_label(title, height, x_trans){\n    return `<g transform=\"translate(${-(x_trans/2 + 10)},${height/2})\"><text x=\"0\" text-anchor=\"middle\" transform=\"rotate(-90 0,0)\" class=\"plot_yaxis_title\" y=\"0\"><tspan>${title}</tspan></text></g>`\n}\n\nexport function get_red_line(dimensions, ranges_dates){\n\n    let x_frame = dimensions.width/(ranges_dates.max_x-1)\n\n    // console.log(\"%%%%\")\n    // console.log(dimensions)\n    // console.log(ranges_dates)\n\n    // let x = x_frame * 256;\n    let x = x_frame * (dimensions.historical_data_length - 1);\n\n\n    return `<g>\n        <path fill=\"none\" class=\"plot_pointer_line\" d=\"M ${x} 0 L ${x} ${dimensions.height}\" stroke-dasharray=\"6\" data-z-index=\"0\"></path>\n    </g>`\n}\n\nexport function get_mark_line(mark_line, height){\n    return `<g transform=\"translate(${mark_line.pos}, 0)\">\n        <path fill=\"none\" data-z-index=\"0\" class=\"plot_mark_line\" d=\"M 0 0 L 0 ${height}\" visibility=\"${mark_line.visibility}\" />         \n    </g>`\n}\n\n// export function get_info_box2(info_box, box_width, box_height){ \n\n//     let y_data = [];\n//     // console.log(info_box.value_y)\n    \n//     if(info_box !== undefined && info_box.value_y !== undefined) {\n//         for(let i=0; i<info_box.colors.length; i++){\n//             y_data.push(`<path fill=\"none\" d=\"M 5 ${(i + 1)*25 + 22} L 20 ${(i + 1)*25 + 22}\" stroke=\"${info_box.colors[i]}\" strokeWidth=\"2\" opacity=\"1\"></path>\n//             <text stroke=\"#343640\" opacity=\"1\" x=25 y=${(i + 1)*25 + 25}>Series ${i + 1} value y: ${info_box.value_y[2][i]}</text>`)\n//         }\n//     }\n\n//     let date = formatDate(info_box.value_x)\n    \n//     return `<g transform=\"translate(${info_box.pos_x}, ${info_box.pos_y})\" data-z-index=\"1\" class=\"plot_info_box\" visibility=${info_box.visibility}>\n//         <rect x=\"0\" y=\"0\" width=${box_width} height=${box_height}  />   \n//         <text x=5 y=\"25\" class=\"plot_info_box_header\">Date: ${date}</text>\n//         ${y_data}\n//     </g>`\n// }\n\n// export function get_y_axis(x, y, height){\n//     let line = `M ${x} ${y} L ${x} ${y + height}`;\n//     return `<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`\n// }\n\n// <text x=25 y=${(i + 1)*25 + 25}>${capitalizeString(keywords[i])} </text>`)\n\nexport function get_info_box(info_box, box_width, box_height, keywords){ \n\n    let y_data = [];\n    \n    if(info_box !== undefined && info_box.value_y !== undefined) {\n        for(let i=0; i<info_box.colors.length; i++){\n            \n            if(info_box.value_y[3][i] !== null && info_box.value_y[2][i] !== null){\n                y_data.push(`<path fill=\"none\" d=\"M 5 ${(i + 1)*25 + 22} L 20 ${(i + 1)*25 + 22}\" stroke=\"${info_box.colors[i]}\" strokeWidth=\"2\" opacity=\"1\"></path>\n                <text x=25 y=${(i + 1)*25 + 25}>${capitalizeString(keywords[i])} ${info_box.value_y[2][i].toFixed(1)} (min: ${info_box.value_y[3][i].toFixed(1)} | max: ${info_box.value_y[4][i].toFixed(1)})</text>`)\n            } else {\n                y_data.push(`<path fill=\"none\" d=\"M 5 ${(i + 1)*25 + 22} L 20 ${(i + 1)*25 + 22}\" stroke=\"${info_box.colors[i]}\" strokeWidth=\"2\" opacity=\"1\"></path>\n                \n                 <text x=25 y=${(i + 1)*25 + 25}>${capitalizeString(keywords[i])} ${info_box.value_y[2][i].toFixed(1)}</text>`)\n            }\n\n            \n        }\n    }\n\n    let date = formatDate(info_box.value_x)\n    \n    return `<g transform=\"translate(${info_box.pos_x}, ${info_box.pos_y})\" data-z-index=\"1\" class=\"plot_info_box\" visibility=${info_box.visibility}>\n        <rect x=\"0\" y=\"0\" width=${box_width} height=${box_height}  />   \n        <g class=\"plot_info_box_header\">\n        <text x=5 y=\"25\">Date: ${date}</text>\n        </g>\n        ${y_data}\n    </g>`\n}\n\nexport function prepare_legend(dimensions, colors, keywords){\n\n    let legend = [];\n    let keyword_sizes = []\n\n    if (dimensions.width2>700){\n        for(let i=0; i<colors.length; i++){\n            let l = calculate_translate_for_legend(keywords[i].length);\n            \n    \n            let translation = keyword_sizes.reduce((a, b) => a + b, 0);\n    \n            legend.push(`\n                <g data-z-index=\"1\" transform=\"translate(${translation},3)\">\n                    <path fill=\"none\" d=\"M 0 11 L 30 11\" stroke=${colors[i]} stroke-width=\"0\"></path>\n                    <text x=\"35\" textAnchor=\"start\" data-z-index=\"0\" y=\"15\" font-size=\"12px\" stroke=\"#6c757d\" stroke-width=\"0\">${capitalizeString(keywords[i])}</text>\n                </g>\n            `);\n            keyword_sizes.push(l);\n        }\n\n        let translation = keyword_sizes.reduce((a, b) => a + b, 0);\n        let width_trans = (dimensions.width2)/2 - translation/2 - dimensions.x_trans;\n        let height_trans = dimensions.height + dimensions.y_trans/2;\n        height_trans = dimensions.height + dimensions.y_trans - dimensions.y_trans2;\n        height_trans = dimensions.height + dimensions.y_trans - 25;\n    \n        return `\n            <g transform=\"translate(${width_trans}, ${height_trans})\" class=\"plot_legend\" >\n                ${legend}\n            </g>`\n        \n    } else {\n        for(let i=0; i<keywords.length; i++){\n            let l = calculate_translate_for_legend(keywords[i].length);\n            keyword_sizes.push(l);\n        }\n\n        for(let i=0; i<colors.length; i++){\n            // let l = calculate_translate_for_legend(keywords[i].length);\n\n            let trans = Math.max(...keyword_sizes);\n    \n            legend.push(`\n                <g data-z-index=\"1\" transform=\"translate(${(dimensions.width)/2 - trans/2}, ${i*18+10})\">\n                    <path fill=\"none\" d=\"M 0 11 L 30 11\" stroke=${colors[i]} stroke-width=\"0\"></path>\n                    <text x=\"35\" textAnchor=\"start\" data-z-index=\"0\" y=\"15\" font-size=\"12px\" stroke=\"#6c757d\" stroke-width=\"0\">${capitalizeString(keywords[i])}</text>\n                </g>\n            `);\n        }\n\n        let height_trans = dimensions.height + 43;\n    \n        return `\n            <g transform=\"translate(${0}, ${height_trans})\" class=\"plot_legend\" >\n                ${legend}\n            </g>`\n    }\n}\n\nfunction calculate_translate_for_legend(keyword_length){\n    return (6,5)*keyword_length + 55;\n}\n\nfunction formatDate(d)\n {\n  let date = new Date(d)\n  var dd = date.getDate(); \n  var mm = date.getMonth()+1;\n  var yyyy = date.getFullYear(); \n  if(dd<10){dd='0'+dd} \n  if(mm<10){mm='0'+mm};\n  return d = dd+'-'+mm+'-'+yyyy\n}\n\nfunction formatDate_monthly(d)\n {\n  let date = new Date(d)\n  var dd = date.getDate(); \n  var mm = date.getMonth()+1;\n  var yyyy = date.getFullYear(); \n  if(dd<10){dd='0'+dd} \n  if(mm<10){mm='0'+mm};\n  return d = mm+'-'+yyyy\n}\n\n// function capitalizeString(string) {\n//     return string.charAt(0).toUpperCase() + string.slice(1);\n// }\n"]},"metadata":{},"sourceType":"module"}