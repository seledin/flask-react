{"ast":null,"code":"var _jsxFileName = \"/Users/marcin/workspace/react/flask-react-app/client/src/Test_Plot_Dates.js\";\nimport React from 'react';\nimport './App.css';\nimport { get_random_colors, get_box_height, get_data_mocks_area_DATES, scale_data_mocks, get_data_map_area_DATES, get_historical_dates, get_forecasted_dates, get_random_mock_area_array_dates, get_min_value, get_max_value } from './utils_dates/functions';\nimport { appConfig } from './utils_dates/config.js';\nimport AxisX from './components/AxisX';\nimport AxisY from './components/AxisY';\nimport Legend from './components/Legend';\nimport Static_Line from './components/Static_Line';\nimport Pointer_Line from './components/Pointer_Line';\nimport Info_Box from './components/Info_Box';\nimport Area_Path from './components/Area_Path';\nimport Plot from './components/Plot';\nlet dimensions = appConfig.dimensions;\nlet ranges = appConfig.ranges_dates;\nlet number_of_plots = appConfig.number_of_plots;\nlet array_length_dates = appConfig.array_length_dates + appConfig.array_length_dates_forecast; // dimensions.box_height = get_box_height(number_of_plots);\n\nlet historical_mock1 = get_random_mock_area_array_dates(get_historical_dates(), 10, 30);\nlet historical_mock2 = get_random_mock_area_array_dates(get_historical_dates(), 40, 80);\nlet forecasted_mock1 = get_random_mock_area_array_dates(get_forecasted_dates(), 10, 30);\nlet forecasted_mock2 = get_random_mock_area_array_dates(get_forecasted_dates(), 40, 80);\nlet historical_data_mock = [historical_mock1, historical_mock2];\nlet forecasted_data_mock = [forecasted_mock1, forecasted_mock2];\n\nfor (let i = 0; i < historical_data_mock.length; i++) {\n  forecasted_data_mock[i].unshift(historical_data_mock[i][historical_data_mock[i].length - 1]);\n}\n\nclass Test_Plot_Dates extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleMouseMove = this.handleMouseMove.bind(this);\n    this.handleHoverOff = this.handleHoverOff.bind(this);\n    this.updateWindowDimensions = this.updateWindowDimensions.bind(this);\n    let x_trans = 85;\n    let y_trans = 85;\n    let y_trans2 = 85;\n    let width = window.innerWidth * 0.6 - 2 * x_trans; // let height = this.props.height - 2*y_trans;\n\n    let height = this.props.height - y_trans - y_trans2;\n    this.divRef = React.createRef();\n    this.state = {\n      title: this.props.options.title,\n      ticks_number: array_length_dates,\n      x_label: this.props.options.x_label,\n      y_label: this.props.options.y_label,\n      mark_line: {\n        pos: 0,\n        visibility: \"hidden\"\n      },\n      info_box: {\n        pos_x: 0,\n        pos_y: 0,\n        visibility: \"hidden\",\n        colors: get_random_colors(this.props.number_of_series)\n      },\n      scaled_historical_data: this.scale_data_mocks(this.props.historical_data, this.props.forecasted_data, ranges, width, height, this.props.number_of_series)[0],\n      scaled_forecasted_data: this.scale_data_mocks(this.props.historical_data, this.props.forecasted_data, ranges, width, height, this.props.number_of_series)[1],\n      //  scaled_historical_data: this.scale_data_mocks(historical_data_mock, forecasted_data_mock, ranges, width, height, 2)[0],\n      //  scaled_forecasted_data: this.scale_data_mocks(historical_data_mock, forecasted_data_mock, ranges, width, height, 2)[1],\n      data_map_area_DATES: this.get_data_map_area_DATES(this.props.historical_data, this.props.forecasted_data, array_length_dates, this.props.number_of_series),\n      //  data_map_area_DATES: this.get_data_map_area_DATES(historical_data_mock, forecasted_data_mock, array_length_dates, 2),\n      colors: this.get_random_colors(this.props.number_of_series),\n      info_box_height: this.get_box_height(this.props.number_of_series),\n      number: this.props.number_of_series,\n      dimensions: {\n        width2: width,\n        width: width / 1.1,\n        height: height,\n        x_trans: x_trans,\n        y_trans: y_trans,\n        y_trans2: y_trans2,\n        historical_data_length: appConfig.array_length_dates,\n        forecasted_data_length: appConfig.array_length_dates_forecast\n      },\n      min_y: get_min_value(this.props.historical_data),\n      max_y: get_max_value(this.props.historical_data),\n      y_number: 13\n    };\n  }\n\n  componentDidMount() {\n    this.updateWindowDimensions();\n    window.addEventListener('resize', this.updateWindowDimensions);\n    this.divRef.current.focus();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.updateWindowDimensions);\n  }\n\n  scaling() {}\n\n  updateWindowDimensions() {\n    let div_width2 = this.divRef.current.clientWidth;\n    let x_trans = this.props.x_trans;\n    let y_trans = this.props.y_trans;\n    let x_trans2 = this.props.x_trans2;\n    let y_trans2 = this.props.y_trans2;\n    let div_width = div_width2 - x_trans - x_trans2;\n    let height = this.props.height - y_trans - y_trans2; // let height = this.props.height - 2*y_trans;\n    // console.log(\"$$\")\n    // console.log(height)\n    // console.log(y_trans2)\n\n    this.setState({\n      dimensions: {\n        width2: div_width2,\n        width: div_width,\n        height: height,\n        x_trans: x_trans,\n        y_trans: y_trans,\n        x_trans2: x_trans2,\n        y_trans2: y_trans2,\n        historical_data_length: appConfig.array_length_dates,\n        forecasted_data_length: appConfig.array_length_dates_forecast\n      },\n      scaled_historical_data: this.scale_data_mocks(this.props.historical_data, this.props.forecasted_data, ranges, div_width, height, this.props.number_of_series)[0],\n      scaled_forecasted_data: this.scale_data_mocks(this.props.historical_data, this.props.forecasted_data, ranges, div_width, height, this.props.number_of_series)[1],\n      min_y: get_min_value(this.props.historical_data),\n      max_y: get_max_value(this.props.historical_data) //  scaled_historical_data: this.scale_data_mocks(historical_data_mock, forecasted_data_mock, ranges, div_width, height, 2)[0],\n      //  scaled_forecasted_data: this.scale_data_mocks(historical_data_mock, forecasted_data_mock, ranges, div_width, height, 2)[1],\n\n    });\n  }\n\n  scale_data_mocks(data, forecasted_data, ranges, width, height, number_of_series) {\n    return scale_data_mocks(data, forecasted_data, ranges, width, height, number_of_series);\n  }\n\n  get_data_map_area_DATES(data, forecasted_data, array_length_dates, number_of_series) {\n    return get_data_map_area_DATES(get_data_mocks_area_DATES(data, forecasted_data, number_of_series), array_length_dates, number_of_series);\n  }\n\n  get_random_colors(number_of_series) {\n    return get_random_colors(number_of_series);\n  }\n\n  get_box_height(number_of_series) {\n    return get_box_height(number_of_series);\n  }\n\n  handleMouseMove(event) {\n    var e = event.target;\n    var dim = e.getBoundingClientRect();\n    var x = event.clientX - dim.left - this.state.dimensions.x_trans;\n    var y = event.clientY - dim.top - this.state.dimensions.y_trans; // console.log(x)\n    // console.log(this.state.dimensions)\n\n    if (x >= 0 && y >= 0 && x <= this.state.dimensions.width && y <= this.state.dimensions.height) {\n      let x_diff = ranges.max_x - ranges.min_x;\n      let x_frame = this.state.dimensions.width / x_diff;\n      let key = Math.round(x / x_frame);\n\n      if (this.state.data_map_area_DATES[key] !== undefined) {\n        let left_index = Math.round((ranges.max_x - ranges.min_x) / 2) - 1;\n        let right_index = Math.round((ranges.max_x - ranges.min_x) / 2) + 1; //keys left\n\n        for (let i = ranges.min_x; i <= key; i++) {\n          if (this.state.data_map_area_DATES[i] !== undefined) {\n            left_index = i;\n          }\n        } //keys right\n\n\n        for (let i = key; i <= ranges.max_x; i++) {\n          if (this.state.data_map_area_DATES[i] !== undefined) {\n            right_index = i;\n          }\n        } //index difference\n\n\n        this.setState({\n          mark_line: {\n            pos: x\n          },\n          info_box: {\n            pos_x: x,\n            pos_y: y,\n            value_x: this.state.data_map_area_DATES[key][1],\n            value_y: this.state.data_map_area_DATES[key],\n            colors: get_random_colors(this.props.number_of_series)\n          }\n        });\n\n        if (this.state.info_box.visibility === 'hidden' || this.state.info_box.visibility === undefined) {\n          this.setState({\n            mark_line: {\n              pos: x\n            }\n          });\n        }\n      } else if (key !== undefined) {\n        ////////////////////////////\n        let left_index = key - 1;\n        let right_index = key + 1; //keys left\n\n        for (let i = key; i >= 0; i--) {\n          if (this.state.data_map_area_DATES[i] !== undefined) {\n            left_index = i;\n            break;\n          }\n        } //keys right\n\n\n        for (let i = key; i <= ranges.max_x; i++) {\n          if (this.state.data_map_area_DATES[i] !== undefined) {\n            right_index = i;\n            break;\n          }\n        } //index difference\n\n\n        let left_diff = key - left_index;\n        let right_diff = right_index - key;\n\n        if (this.state.data_map_area_DATES[left_index] !== undefined && this.state.data_map_area_DATES[right_index] !== undefined) {\n          if (left_diff <= right_diff) {\n            this.setState({\n              mark_line: {\n                pos: x\n              },\n              info_box: {\n                pos_x: x,\n                pos_y: y,\n                value_x: this.state.data_map_area_DATES[key][1],\n                value_y: this.state.data_map_area_DATES[key],\n                colors: get_random_colors(this.props.number_of_series)\n              }\n            });\n\n            if (this.state.info_box.visibility === 'hidden' || this.state.info_box.visibility === undefined) {\n              this.setState({\n                mark_line: {\n                  pos: x\n                }\n              });\n            }\n          } else {\n            this.setState({\n              mark_line: {\n                pos: x\n              },\n              info_box: {\n                pos_x: x,\n                pos_y: y,\n                value_x: this.state.data_map_area_DATES[key][1],\n                value_y: this.state.data_map_area_DATES[key],\n                colors: get_random_colors(this.props.number_of_series)\n              }\n            });\n\n            if (this.state.info_box.visibility === 'hidden' || this.state.info_box.visibility === undefined) {\n              this.setState({\n                mark_line: {\n                  pos: x\n                }\n              });\n            }\n          }\n        } /////////////////\n\n      }\n    } else if (x > this.state.dimensions.width || y > this.state.dimensions.height || x < this.state.dimensions.x_trans || y < this.state.dimensions.y_trans) {\n      this.setState({\n        mark_line: {\n          visibility: \"hidden\",\n          pos: 9999\n        },\n        info_box: {\n          visibility: \"hidden\",\n          pos_x: 9999,\n          pos_y: 9999,\n          colors: get_random_colors(this.props.number_of_series)\n        }\n      });\n    }\n  }\n\n  handleHoverOff(event) {\n    this.setState({\n      mark_line: {\n        pos: 0,\n        visibility: \"hidden\"\n      },\n      info_box: {\n        pos_x: 0,\n        pos_y: 0,\n        visibility: \"hidden\",\n        colors: get_random_colors(this.props.number_of_series)\n      }\n    });\n  }\n\n  render() {\n    // console.log(this.state.min_y)\n    // console.log(this.state.max_y)\n    // console.log(\"$$$$$\")\n    // console.log(Object.keys(this.state.data_map_area_DATES).length)\n    // console.log(this.state.data_map_area_DATES)\n    // console.log(this.state.dimensions)\n    // console.log(this.state.scaled_forecasted_data)\n    // console.log(this.state.scaled_historical_data)\n    let area_paths = this.state.scaled_historical_data.map((entity, index) => {\n      return React.createElement(Area_Path, {\n        key: index,\n        data: entity,\n        color: this.state.colors[index],\n        style: \"none\",\n        slice: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345\n        },\n        __self: this\n      });\n    });\n    let area_paths_future = this.state.scaled_forecasted_data.map((entity, index) => {\n      return React.createElement(Area_Path, {\n        key: index,\n        data: entity,\n        color: this.state.colors[index],\n        style: \"dash\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351\n        },\n        __self: this\n      });\n    });\n    let v_b = \"0 0 \" + this.state.dimensions.width2 + \" \" + this.props.height;\n    let v_trans = \"translate(\" + this.state.dimensions.x_trans + \",\" + this.state.dimensions.y_trans + \")\";\n    const aa = this.state.max_y;\n    console.log(this.state.min_y);\n    console.log(\"@@: \" + aa);\n    let upper_bound = this.state.max_x;\n    let lower_bound = Math.ceil((Math.abs(this.state.min_y) + 1) / 10) * 10; // let upper_bound = Math.ceil(((this.state.max_x)+1) / 10) * 10\n    // let upper_bound = this.state.max_x\n\n    let calc_y_number = lower_bound + upper_bound;\n    console.log(lower_bound);\n    console.log(\"@@: \" + this.state.max_y);\n    console.log(upper_bound);\n    console.log(calc_y_number);\n    return React.createElement(\"div\", {\n      ref: this.divRef,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377\n      },\n      __self: this\n    }, React.createElement(\"svg\", {\n      version: \"1.1\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      preserveAspectRatio: \"none\",\n      onMouseMove: this.handleMouseMove,\n      onMouseLeave: this.handleHoverOff,\n      className: \"test_plot\",\n      width: this.state.dimensions.width2,\n      height: this.props.height,\n      viewBox: v_b,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378\n      },\n      __self: this\n    }, React.createElement(\"g\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380\n      },\n      __self: this\n    }, React.createElement(\"g\", {\n      transform: v_trans,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381\n      },\n      __self: this\n    }, area_paths, area_paths_future, React.createElement(Plot, {\n      dimensions: this.state.dimensions,\n      y_number: this.state.y_number,\n      title: this.state.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387\n      },\n      __self: this\n    }), React.createElement(AxisY, {\n      dimensions: this.state.dimensions,\n      y_number: this.state.y_number,\n      y_label: this.state.y_label,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389\n      },\n      __self: this\n    }), React.createElement(AxisX, {\n      dimensions: this.state.dimensions,\n      x_label: this.state.x_label,\n      ticks: 12,\n      dates: this.state.data_map_area_DATES,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391\n      },\n      __self: this\n    }), React.createElement(Legend, {\n      dimensions: this.state.dimensions,\n      colors: this.state.colors,\n      keywords: this.props.keywords,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393\n      },\n      __self: this\n    }), React.createElement(Static_Line, {\n      dimensions: this.state.dimensions,\n      ranges: ranges,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395\n      },\n      __self: this\n    }), React.createElement(Pointer_Line, {\n      mark_line: this.state.mark_line,\n      height: this.state.dimensions.height,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397\n      },\n      __self: this\n    }), React.createElement(Info_Box, {\n      info_box: this.state.info_box,\n      width: dimensions.box_width,\n      height: this.state.info_box_height,\n      keywords: this.props.keywords,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nfunction round(num, pre) {\n  if (!pre) pre = 0;\n  var pow = Math.pow(10, pre);\n  return Math.round(num * pow) / pow;\n}\n\nexport default Test_Plot_Dates;","map":{"version":3,"sources":["/Users/marcin/workspace/react/flask-react-app/client/src/Test_Plot_Dates.js"],"names":["React","get_random_colors","get_box_height","get_data_mocks_area_DATES","scale_data_mocks","get_data_map_area_DATES","get_historical_dates","get_forecasted_dates","get_random_mock_area_array_dates","get_min_value","get_max_value","appConfig","AxisX","AxisY","Legend","Static_Line","Pointer_Line","Info_Box","Area_Path","Plot","dimensions","ranges","ranges_dates","number_of_plots","array_length_dates","array_length_dates_forecast","historical_mock1","historical_mock2","forecasted_mock1","forecasted_mock2","historical_data_mock","forecasted_data_mock","i","length","unshift","Test_Plot_Dates","Component","constructor","props","handleMouseMove","bind","handleHoverOff","updateWindowDimensions","x_trans","y_trans","y_trans2","width","window","innerWidth","height","divRef","createRef","state","title","options","ticks_number","x_label","y_label","mark_line","pos","visibility","info_box","pos_x","pos_y","colors","number_of_series","scaled_historical_data","historical_data","forecasted_data","scaled_forecasted_data","data_map_area_DATES","info_box_height","number","width2","historical_data_length","forecasted_data_length","min_y","max_y","y_number","componentDidMount","addEventListener","current","focus","componentWillUnmount","removeEventListener","scaling","div_width2","clientWidth","x_trans2","div_width","setState","data","event","e","target","dim","getBoundingClientRect","x","clientX","left","y","clientY","top","x_diff","max_x","min_x","x_frame","key","Math","round","undefined","left_index","right_index","value_x","value_y","left_diff","right_diff","render","area_paths","map","entity","index","area_paths_future","v_b","v_trans","aa","console","log","upper_bound","lower_bound","ceil","abs","calc_y_number","keywords","box_width","num","pre","pow"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport { get_random_colors, get_box_height, get_data_mocks_area_DATES, scale_data_mocks, get_data_map_area_DATES, get_historical_dates, get_forecasted_dates, get_random_mock_area_array_dates, get_min_value, get_max_value} from './utils_dates/functions'\nimport { appConfig } from './utils_dates/config.js';\n\nimport AxisX from './components/AxisX';\nimport AxisY from './components/AxisY';\nimport Legend from './components/Legend';\nimport Static_Line from './components/Static_Line';\nimport Pointer_Line from './components/Pointer_Line';\nimport Info_Box from './components/Info_Box';\nimport Area_Path from './components/Area_Path';\nimport Plot from './components/Plot';\n\n\nlet dimensions = appConfig.dimensions;\nlet ranges = appConfig.ranges_dates;\nlet number_of_plots = appConfig.number_of_plots;\nlet array_length_dates = appConfig.array_length_dates + appConfig.array_length_dates_forecast;\n\n// dimensions.box_height = get_box_height(number_of_plots);\n\nlet historical_mock1 = get_random_mock_area_array_dates(get_historical_dates(),10,30)\nlet historical_mock2 = get_random_mock_area_array_dates(get_historical_dates(),40,80)\n\nlet forecasted_mock1 = get_random_mock_area_array_dates(get_forecasted_dates(),10,30)\nlet forecasted_mock2 = get_random_mock_area_array_dates(get_forecasted_dates(),40,80)\n\nlet historical_data_mock = [historical_mock1, historical_mock2]\nlet forecasted_data_mock = [forecasted_mock1, forecasted_mock2]\n\nfor(let i=0;i<historical_data_mock.length; i++){\n  forecasted_data_mock[i].unshift(historical_data_mock[i][historical_data_mock[i].length - 1])\n}\n\nclass Test_Plot_Dates extends React.Component {\t\n\n  constructor(props) {\n    super(props);\n\n    this.handleMouseMove = this.handleMouseMove.bind(this);\n    this.handleHoverOff = this.handleHoverOff.bind(this);\n    this.updateWindowDimensions = this.updateWindowDimensions.bind(this);\n\n    let x_trans = 85;\n    let y_trans = 85;\n    let y_trans2 = 85;\n\n    let width = window.innerWidth*(0.6) - 2*x_trans;\n    // let height = this.props.height - 2*y_trans;\n    let height = this.props.height - y_trans - y_trans2;\n\n    this.divRef = React.createRef();\n\n    this.state = {\n        title: this.props.options.title,\n        ticks_number: array_length_dates,\n        x_label: this.props.options.x_label,\n        y_label: this.props.options.y_label,\n        mark_line: {\n          pos: 0,\n          visibility: \"hidden\"\n        },\n        info_box: {\n          pos_x: 0,\n          pos_y: 0,\n          visibility: \"hidden\",\n          colors: get_random_colors(this.props.number_of_series),\n        },\n       scaled_historical_data: this.scale_data_mocks(this.props.historical_data, this.props.forecasted_data, ranges, width, height, this.props.number_of_series)[0],\n       scaled_forecasted_data: this.scale_data_mocks(this.props.historical_data, this.props.forecasted_data, ranges, width, height, this.props.number_of_series)[1],\n\n      //  scaled_historical_data: this.scale_data_mocks(historical_data_mock, forecasted_data_mock, ranges, width, height, 2)[0],\n      //  scaled_forecasted_data: this.scale_data_mocks(historical_data_mock, forecasted_data_mock, ranges, width, height, 2)[1],\n\n       data_map_area_DATES: this.get_data_map_area_DATES(this.props.historical_data, this.props.forecasted_data, array_length_dates, this.props.number_of_series),\n      //  data_map_area_DATES: this.get_data_map_area_DATES(historical_data_mock, forecasted_data_mock, array_length_dates, 2),\n\n       colors: this.get_random_colors(this.props.number_of_series),\n       info_box_height: this.get_box_height(this.props.number_of_series),\n       number: this.props.number_of_series,\n       dimensions: {\n        width2: width,\n        width: width/1.1,\n        height: height,\n        x_trans: x_trans,\n        y_trans: y_trans,\n        y_trans2: y_trans2,\n        historical_data_length: appConfig.array_length_dates,\n        forecasted_data_length: appConfig.array_length_dates_forecast,\n       },\n       min_y: get_min_value(this.props.historical_data),\n       max_y: get_max_value(this.props.historical_data), \n       y_number: 13,\n    };\n  }\n\n\n  componentDidMount() {\n    this.updateWindowDimensions();\n    window.addEventListener('resize', this.updateWindowDimensions);\n    this.divRef.current.focus();\n  }\n  \n  componentWillUnmount() {\n    window.removeEventListener('resize', this.updateWindowDimensions);\n  }\n\n  scaling(){\n\n  }\n  \n  updateWindowDimensions() {\n    \n    let div_width2 = this.divRef.current.clientWidth;\n\n    let x_trans = this.props.x_trans;\n    let y_trans = this.props.y_trans;\n    let x_trans2 = this.props.x_trans2;\n    let y_trans2 = this.props.y_trans2;\n\n    let div_width = div_width2 - x_trans - x_trans2;\n    let height = this.props.height - y_trans - y_trans2;\n    // let height = this.props.height - 2*y_trans;\n\n    // console.log(\"$$\")\n    // console.log(height)\n    // console.log(y_trans2)\n\n    this.setState({\n      dimensions: {\n        width2: div_width2,\n        width: div_width,\n        height: height,\n        x_trans: x_trans,\n        y_trans: y_trans,\n        x_trans2: x_trans2,\n        y_trans2: y_trans2,\n        historical_data_length: appConfig.array_length_dates,\n        forecasted_data_length: appConfig.array_length_dates_forecast,\n       },\n       scaled_historical_data: this.scale_data_mocks(this.props.historical_data, this.props.forecasted_data, ranges, div_width, height, this.props.number_of_series)[0],\n       scaled_forecasted_data: this.scale_data_mocks(this.props.historical_data, this.props.forecasted_data, ranges, div_width, height, this.props.number_of_series)[1],\n       min_y: get_min_value(this.props.historical_data),\n       max_y: get_max_value(this.props.historical_data), \n\n      //  scaled_historical_data: this.scale_data_mocks(historical_data_mock, forecasted_data_mock, ranges, div_width, height, 2)[0],\n      //  scaled_forecasted_data: this.scale_data_mocks(historical_data_mock, forecasted_data_mock, ranges, div_width, height, 2)[1],\n       \n    });\n  }\n\n  scale_data_mocks(data, forecasted_data, ranges, width, height , number_of_series){\n    return scale_data_mocks(data, forecasted_data, ranges, width, height , number_of_series)\n  }\n\n  get_data_map_area_DATES(data, forecasted_data, array_length_dates, number_of_series){\n    return get_data_map_area_DATES(get_data_mocks_area_DATES(data, forecasted_data, number_of_series), array_length_dates, number_of_series)\n  }\n\n  get_random_colors(number_of_series){\n    return get_random_colors(number_of_series)\n  }\n\n  get_box_height(number_of_series){\n    return get_box_height(number_of_series)\n  }\n\n\n  handleMouseMove(event) {\n    var e = event.target;\n    var dim = e.getBoundingClientRect();\n    var x = event.clientX - dim.left - this.state.dimensions.x_trans;\n    var y = event.clientY - dim.top - this.state.dimensions.y_trans;\n\n    // console.log(x)\n    // console.log(this.state.dimensions)\n\n\n    if(x >= 0 && y >= 0 && x <= this.state.dimensions.width && y <= this.state.dimensions.height){\n\n      let x_diff = ranges.max_x - ranges.min_x;  \n      let x_frame = this.state.dimensions.width/x_diff;\n      let key = Math.round((x)/x_frame);\n\n      if (this.state.data_map_area_DATES[key] !== undefined){\n\n        let left_index = Math.round((ranges.max_x - ranges.min_x)/2) - 1;\n        let right_index = Math.round((ranges.max_x - ranges.min_x)/2) + 1;\n\n        //keys left\n        for(let i=ranges.min_x; i<=key; i++){\n          if(this.state.data_map_area_DATES[i] !== undefined){\n            left_index = i\n          }\n        }\n\n        //keys right\n        for(let i=key; i<=ranges.max_x; i++){\n          if(this.state.data_map_area_DATES[i] !== undefined){\n            right_index = i\n          }\n        }\n    \n        //index difference\n        this.setState({\n          mark_line: {\n            pos: x,  \n          },\n          info_box: {\n            pos_x: x,\n            pos_y: y,\n            value_x: this.state.data_map_area_DATES[key][1],\n            value_y: this.state.data_map_area_DATES[key],\n            colors: get_random_colors(this.props.number_of_series)\n          }\n        })\n        if (this.state.info_box.visibility === 'hidden' || this.state.info_box.visibility === undefined) {\n          this.setState({\n            mark_line: {\n              pos: x\n            }\n          })\n        }\n      } else if (key !== undefined){\n////////////////////////////\n\n        let left_index = key - 1;\n        let right_index = key + 1;\n        \n        //keys left\n        for (let i=key; i>=0; i--) {\n          if(this.state.data_map_area_DATES[i] !== undefined){\n            left_index = i;\n            break;\n          }\n        }\n\n        //keys right\n        for (let i=key; i<=ranges.max_x; i++) {\n          if(this.state.data_map_area_DATES[i] !== undefined) {\n            right_index = i;\n            break;\n          }\n        }\n\n        //index difference\n        let left_diff = key - left_index;\n        let right_diff = right_index - key;\n\n\n        if((this.state.data_map_area_DATES[left_index] !== undefined) && (this.state.data_map_area_DATES[right_index] !== undefined)){\n          if (left_diff<=right_diff ) {\n            this.setState({\n              mark_line: {\n                pos: x,  \n              },\n              info_box: {\n                pos_x: x,\n                pos_y: y,\n                value_x: this.state.data_map_area_DATES[key][1],\n                value_y: this.state.data_map_area_DATES[key],\n                colors: get_random_colors(this.props.number_of_series)\n              }\n            })\n            if (this.state.info_box.visibility === 'hidden' || this.state.info_box.visibility === undefined) {\n              this.setState({\n                mark_line: {\n                  pos: x\n                }\n              })\n            }\n          } else {\n            this.setState({\n              mark_line: {\n                pos: x,  \n              },\n              info_box: {\n                pos_x: x,\n                pos_y: y,\n                value_x: this.state.data_map_area_DATES[key][1],\n                value_y: this.state.data_map_area_DATES[key],\n                colors: get_random_colors(this.props.number_of_series)\n              }\n            })\n            if (this.state.info_box.visibility === 'hidden' || this.state.info_box.visibility === undefined) {\n              this.setState({\n                mark_line: {\n                  pos: x\n                }\n              })\n            }\n          }\n\n        }\n/////////////////\n\n      }\n    } else if (x > this.state.dimensions.width || y > this.state.dimensions.height || x < this.state.dimensions.x_trans || y < this.state.dimensions.y_trans){\n      this.setState({\n        mark_line: {\n          visibility: \"hidden\",\n          pos: 9999\n        },\n        info_box: {\n          visibility: \"hidden\",\n          pos_x: 9999,\n          pos_y: 9999,\n          colors: get_random_colors(this.props.number_of_series)\n        }\n      })\n    }\n  }\n  \n\n  handleHoverOff(event) {\n    this.setState({\n      mark_line:{\n          pos: 0,\n          visibility: \"hidden\"\n      },\n      info_box: {\n        pos_x: 0,\n        pos_y: 0,\n        visibility: \"hidden\",\n        colors: get_random_colors(this.props.number_of_series)\n      }\n    })\n  }\n\n  render() {\n\n    // console.log(this.state.min_y)\n    // console.log(this.state.max_y)\n    // console.log(\"$$$$$\")\n    // console.log(Object.keys(this.state.data_map_area_DATES).length)\n    // console.log(this.state.data_map_area_DATES)\n    // console.log(this.state.dimensions)\n    // console.log(this.state.scaled_forecasted_data)\n\n    // console.log(this.state.scaled_historical_data)\n\n    let area_paths = this.state.scaled_historical_data.map(( entity, index ) => {\n      return (\n        <Area_Path key={index} data={entity} color={this.state.colors[index]} style={\"none\"} slice={4}/>\n      );\n    });\n\n    let area_paths_future = this.state.scaled_forecasted_data.map(( entity, index ) => {\n      return (\n        <Area_Path key={index} data={entity} color={this.state.colors[index]} style={\"dash\"} />\n      );\n    });\n\n    let v_b = \"0 0 \" + this.state.dimensions.width2 + \" \" + this.props.height;\n    let v_trans = \"translate(\" + this.state.dimensions.x_trans + \",\" + this.state.dimensions.y_trans + \")\";\n\n    const aa = this.state.max_y;\n    console.log(this.state.min_y)\n    console.log(\"@@: \" + aa)\n\n    let upper_bound = this.state.max_x\n\n    let lower_bound = Math.ceil((Math.abs(this.state.min_y)+1) / 10) * 10\n    // let upper_bound = Math.ceil(((this.state.max_x)+1) / 10) * 10\n\n    // let upper_bound = this.state.max_x\n\n    let calc_y_number = lower_bound + upper_bound\n\n    console.log(lower_bound)\n    console.log(\"@@: \" + this.state.max_y)\n    console.log(upper_bound)\n    console.log(calc_y_number)\n\n    return (\n      <div ref={this.divRef}>\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" preserveAspectRatio=\"none\" onMouseMove={this.handleMouseMove} onMouseLeave={this.handleHoverOff} className=\"test_plot\" width={this.state.dimensions.width2} height={this.props.height} viewBox={v_b}>\n          {/* <rect fill=\"#ffffff\" className=\"\" x=\"0\" y=\"0\" width={dimensions.width} height={dimensions.height} rx=\"0\" ry=\"0\"></rect>  */}\n            <g>\n              <g transform={v_trans}>\n\n                { area_paths }\n\n                { area_paths_future }\n                \n                <Plot dimensions={this.state.dimensions} y_number={this.state.y_number} title={this.state.title} />\n\n                <AxisY dimensions={this.state.dimensions} y_number={this.state.y_number} y_label={this.state.y_label} />\n\n                <AxisX dimensions={this.state.dimensions} x_label={this.state.x_label} ticks={12} dates={this.state.data_map_area_DATES} />\n                \n                <Legend dimensions={this.state.dimensions} colors={this.state.colors} keywords={this.props.keywords} />\n\n                <Static_Line dimensions={this.state.dimensions} ranges={ranges} />\n\n                <Pointer_Line mark_line={this.state.mark_line} height={this.state.dimensions.height} />\n\n                <Info_Box info_box={this.state.info_box} width={dimensions.box_width} height={this.state.info_box_height} keywords={this.props.keywords}  />\n                \n              </g>\n            </g>\n        </svg>\n      </div>\n    );\n  }\n}\n\nfunction round(num,pre) {\n  if( !pre) pre = 0;\n  var pow = Math.pow(10,pre);\n  return Math.round(num*pow)/pow;\n}\n\nexport default Test_Plot_Dates;\n"]},"metadata":{},"sourceType":"module"}