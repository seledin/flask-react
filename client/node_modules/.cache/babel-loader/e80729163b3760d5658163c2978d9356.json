{"ast":null,"code":"import { capitalizeString } from \"./functions\";\n\nfunction make_line(point, width) {\n  let line = `M 0 ${point} H ${width}`;\n  return `<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`;\n}\n\nfunction make_yy_tick(x, y) {\n  let line = `M ${x - 10} ${y} L ${x} ${y}`; // return `<path class=\"plot_xmark\" d=\"${line}\" data-z-index=\"0\" />`\n\n  return `<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`;\n}\n\nexport function get_lines(width, height, lines_number) {\n  let frame = height / lines_number;\n  let result = [];\n\n  for (let i = lines_number; i <= lines_number; i++) {\n    let point = frame * i;\n    result.push(make_line(point, width));\n  }\n\n  return result;\n}\nexport function get_y_ticks(height, lines_number) {\n  let result = [];\n  let frame = height / lines_number;\n\n  for (let i = 0; i <= lines_number; i++) {\n    let point = frame * i;\n    result.push(make_yy_tick(0, point));\n  }\n\n  return result;\n}\n\nfunction make_x_tick(x, y) {\n  let line = `M ${x} ${y} L ${x} ${y + 10}`;\n  return `<path class=\"plot_xmark\" d=\"${line}\" data-z-index=\"0\" />`;\n}\n\nexport function get_ticks(width, height, ticks_number) {\n  let result = [];\n  let frame = width / (ticks_number - 1);\n\n  for (let i = 0; i < ticks_number; i++) {\n    let point = frame * i;\n    result.push(make_x_tick(point, height));\n  } // let frame = width / (length - 1)\n  // for(let i=0; i<ticks_number; i++){\n  //     // result.push(`<text x=\"${frame*i}\" class=\"plot_xtick\" text-anchor=\"middle\" y=\"${height + 30}\">${formatDate_monthly(data_mock[data_frame*i][1])}</text>`)\n  //     result.push(`<text x=\"${frame*i}\" class=\"plot_xtick\" text-anchor=\"middle\" y=\"${height + 30}\">${formatDate_monthly(data_mock[i][1])}</text>`)\n  // }\n\n\n  return result;\n}\n\nfunction make_y_tick(x, y, value) {\n  return `<text x=\"${x}\" textAnchor=\"end\" class=\"plot_ytick\" y=\"${y}\">${value}</text>`;\n}\n\nexport function get_y_axis(x, y, height, lines_number) {\n  let result = [];\n  let frame = height / lines_number;\n\n  for (let i = 0; i <= lines_number; i++) {\n    result.push(make_y_tick(-40, height - frame * i, i * lines_number));\n  }\n\n  let line = `M ${x} ${y} L ${x} ${y + height}`;\n  result.push(`<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`);\n  return result;\n}\nexport function prepare_title(title, width, height, x_trans, y_trans) {\n  return `<text x=\"${width / 2}\" class=\"plot_title\" text-anchor=\"middle\" y=\"${-y_trans / 3}\">${title}</text>`;\n}\nexport function prepare_x_axis(width, height, ticks_number, data_mock) {\n  let result = [];\n  let length = Object.keys(data_mock).length;\n  let data_frame = Math.floor(length / (ticks_number - 1));\n  let frame = width / (ticks_number - 1);\n\n  for (let i = 0; i < ticks_number; i++) {\n    // result.push(`<text x=\"${frame*i}\" class=\"plot_xtick\" text-anchor=\"middle\" y=\"${height + 30}\">${formatDate_monthly(data_mock[data_frame*i][1])}</text>`)\n    result.push(`<text x=\"${frame * i}\" class=\"plot_xtick\" text-anchor=\"middle\" y=\"${height + 30}\">${formatDate_monthly(data_mock[data_frame * i][1])}</text>`);\n  }\n\n  return result;\n}\nexport function get_x_axis(title, width, height, x_trans, y_trans) {\n  let result = [];\n  let line = `M 0 ${height} H ${width}`;\n  result.push(`<text x=\"${width / 2}\" text-anchor=\"middle\" class=\"plot_xaxis_title\" y=\"${height + y_trans / 2}\"><tspan>${title}</tspan></text>`);\n  result.push(`<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`);\n  return result;\n}\nexport function get_y_axis_label(title, height, x_trans) {\n  return `<text x=\"${x_trans}\" text-anchor=\"middle\" transform=\"translate(0,0) rotate(270 25.140625 309.5)\" class=\"plot_yaxis_title\" y=\"${(height + x_trans) / 2 - 0.1 * x_trans}\"><tspan>${title}</tspan></text>`;\n}\nexport function get_red_line(dimensions, ranges_dates) {\n  let x_frame = dimensions.width / (ranges_dates.max_x - 1); // console.log(\"%%%%\")\n  // console.log(dimensions)\n  // console.log(ranges_dates)\n  // let x = x_frame * 256;\n\n  let x = x_frame * (dimensions.historical_data_length - 1);\n  return `<g>\n        <path fill=\"none\" class=\"plot_pointer_line\" d=\"M ${x} 0 L ${x} ${dimensions.height}\" stroke-dasharray=\"6\" data-z-index=\"0\"></path>\n    </g>`;\n}\nexport function get_mark_line(mark_line, height) {\n  return `<g transform=\"translate(${mark_line.pos}, 0)\">\n        <path fill=\"none\" data-z-index=\"0\" class=\"plot_mark_line\" d=\"M 0 0 L 0 ${height}\" visibility=\"${mark_line.visibility}\" />         \n    </g>`;\n} // export function get_info_box2(info_box, box_width, box_height){ \n//     let y_data = [];\n//     // console.log(info_box.value_y)\n//     if(info_box !== undefined && info_box.value_y !== undefined) {\n//         for(let i=0; i<info_box.colors.length; i++){\n//             y_data.push(`<path fill=\"none\" d=\"M 5 ${(i + 1)*25 + 22} L 20 ${(i + 1)*25 + 22}\" stroke=\"${info_box.colors[i]}\" strokeWidth=\"2\" opacity=\"1\"></path>\n//             <text stroke=\"#343640\" opacity=\"1\" x=25 y=${(i + 1)*25 + 25}>Series ${i + 1} value y: ${info_box.value_y[2][i]}</text>`)\n//         }\n//     }\n//     let date = formatDate(info_box.value_x)\n//     return `<g transform=\"translate(${info_box.pos_x}, ${info_box.pos_y})\" data-z-index=\"1\" class=\"plot_info_box\" visibility=${info_box.visibility}>\n//         <rect x=\"0\" y=\"0\" width=${box_width} height=${box_height}  />   \n//         <text x=5 y=\"25\" class=\"plot_info_box_header\">Date: ${date}</text>\n//         ${y_data}\n//     </g>`\n// }\n// export function get_y_axis(x, y, height){\n//     let line = `M ${x} ${y} L ${x} ${y + height}`;\n//     return `<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`\n// }\n\nexport function get_info_box(info_box, box_width, box_height, keywords) {\n  let y_data = [];\n\n  if (info_box !== undefined && info_box.value_y !== undefined) {\n    for (let i = 0; i < info_box.colors.length; i++) {\n      y_data.push(`<path fill=\"none\" d=\"M 5 ${(i + 1) * 25 + 22} L 20 ${(i + 1) * 25 + 22}\" stroke=\"${info_box.colors[i]}\" strokeWidth=\"2\" opacity=\"1\"></path>\n             <text x=25 y=${(i + 1) * 25 + 25}>${capitalizeString(keywords[i])} ${info_box.value_y[2][i].toFixed(1)} (min: ${info_box.value_y[3][i].toFixed(1)} | max: ${info_box.value_y[2][i].toFixed(1)})</text>`);\n    }\n  }\n\n  let date = formatDate(info_box.value_x);\n  return `<g transform=\"translate(${info_box.pos_x}, ${info_box.pos_y})\" data-z-index=\"1\" class=\"plot_info_box\" visibility=${info_box.visibility}>\n        <rect x=\"0\" y=\"0\" width=${box_width} height=${box_height}  />   \n        <g class=\"plot_info_box_header\">\n        <text x=5 y=\"25\">Date: ${date}</text>\n        </g>\n        ${y_data}\n    </g>`;\n}\nexport function prepare_legend(width, height, colors, keywords) {\n  let legend = [];\n  let keyword_sizes = [];\n\n  for (let i = 0; i < colors.length; i++) {\n    let l = calculate_translate_for_legend(keywords[i].length);\n    let translation = keyword_sizes.reduce((a, b) => a + b, 0);\n    legend.push(`\n            <g data-z-index=\"1\" transform=\"translate(${translation},3)\">\n                <path fill=\"none\" d=\"M 0 11 L 30 11\" stroke=${colors[i]} stroke-width=\"0\"></path>\n                <text x=\"35\" textAnchor=\"start\" data-z-index=\"0\" y=\"15\" font-size=\"1.1em\" stroke=\"#6c757d\" stroke-width=\"0\">${capitalizeString(keywords[i])}</text>\n            </g>\n        `);\n    keyword_sizes.push(l + 19);\n  }\n\n  return `\n        <g transform=\"translate(${width}, ${height})\" class=\"plot_legend\" >\n            ${legend}\n        </g>\n    `;\n}\n\nfunction calculate_translate_for_legend(keyword_length) {\n  return 10 * keyword_length;\n}\n\nfunction formatDate(d) {\n  let date = new Date(d);\n  var dd = date.getDate();\n  var mm = date.getMonth() + 1;\n  var yyyy = date.getFullYear();\n\n  if (dd < 10) {\n    dd = '0' + dd;\n  }\n\n  if (mm < 10) {\n    mm = '0' + mm;\n  }\n\n  ;\n  return d = dd + '-' + mm + '-' + yyyy;\n}\n\nfunction formatDate_monthly(d) {\n  let date = new Date(d);\n  var dd = date.getDate();\n  var mm = date.getMonth() + 1;\n  var yyyy = date.getFullYear();\n\n  if (dd < 10) {\n    dd = '0' + dd;\n  }\n\n  if (mm < 10) {\n    mm = '0' + mm;\n  }\n\n  ;\n  return d = mm + '-' + yyyy;\n} // function capitalizeString(string) {\n//     return string.charAt(0).toUpperCase() + string.slice(1);\n// }","map":{"version":3,"sources":["/Users/marcin/workspace/react/flask-react-app/client/src/utils_dates/graphics.js"],"names":["capitalizeString","make_line","point","width","line","make_yy_tick","x","y","get_lines","height","lines_number","frame","result","i","push","get_y_ticks","make_x_tick","get_ticks","ticks_number","make_y_tick","value","get_y_axis","prepare_title","title","x_trans","y_trans","prepare_x_axis","data_mock","length","Object","keys","data_frame","Math","floor","formatDate_monthly","get_x_axis","get_y_axis_label","get_red_line","dimensions","ranges_dates","x_frame","max_x","historical_data_length","get_mark_line","mark_line","pos","visibility","get_info_box","info_box","box_width","box_height","keywords","y_data","undefined","value_y","colors","toFixed","date","formatDate","value_x","pos_x","pos_y","prepare_legend","legend","keyword_sizes","l","calculate_translate_for_legend","translation","reduce","a","b","keyword_length","d","Date","dd","getDate","mm","getMonth","yyyy","getFullYear"],"mappings":"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","sourcesContent":["import { capitalizeString } from \"./functions\";\n\n\nfunction make_line (point, width) {\n\n    let line = `M 0 ${point} H ${width}`;\n    return `<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`\n}\n\nfunction make_yy_tick(x, y) {\n\n    let line = `M ${x-10} ${y} L ${x} ${y}`;\n    // return `<path class=\"plot_xmark\" d=\"${line}\" data-z-index=\"0\" />`\n    return `<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`\n}\n\nexport function get_lines (width, height, lines_number) {\n\n    let frame = height / lines_number;\n\n    let result = [];\n\n    for (let i=lines_number; i<=lines_number; i++){\n        let point = frame * i;\n        result.push(make_line(point,width))\n    }\n\n    return result;\n}\n\nexport function get_y_ticks (height, lines_number) {\n    let result = []\n\n    let frame = height / lines_number;\n\n    for (let i=0; i<=lines_number; i++){\n        let point = frame * i;\n        result.push(make_yy_tick(0,point))\n    }\n\n    return result\n}\n\n\nfunction make_x_tick(x, y) {\n\n    let line = `M ${x} ${y} L ${x} ${y + 10}`;\n    return `<path class=\"plot_xmark\" d=\"${line}\" data-z-index=\"0\" />`\n}\n\nexport function get_ticks(width, height, ticks_number){\n    let result = [];\n\n    let frame = width / (ticks_number - 1);\n\n    for (let i=0; i<ticks_number; i++){\n        let point = frame * i;\n        result.push(make_x_tick(point, height))\n    }\n\n    // let frame = width / (length - 1)\n    // for(let i=0; i<ticks_number; i++){\n    //     // result.push(`<text x=\"${frame*i}\" class=\"plot_xtick\" text-anchor=\"middle\" y=\"${height + 30}\">${formatDate_monthly(data_mock[data_frame*i][1])}</text>`)\n    //     result.push(`<text x=\"${frame*i}\" class=\"plot_xtick\" text-anchor=\"middle\" y=\"${height + 30}\">${formatDate_monthly(data_mock[i][1])}</text>`)\n    // }\n\n    return result;\n}\n\nfunction make_y_tick(x, y, value) {\n    return `<text x=\"${x}\" textAnchor=\"end\" class=\"plot_ytick\" y=\"${y}\">${value}</text>`\n}\n\nexport function get_y_axis(x, y, height, lines_number) {\n    let result = [];\n\n    let frame = height / lines_number;\n\n    for(let i=0; i<=lines_number; i++){\n        result.push(make_y_tick(-40, height - frame*(i),i * lines_number));\n    }\n\n    let line = `M ${x} ${y} L ${x} ${y + height}`;\n    result.push(`<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`)\n\n    return result;\n}\n\nexport function prepare_title(title, width, height, x_trans, y_trans){\n    return `<text x=\"${width/2}\" class=\"plot_title\" text-anchor=\"middle\" y=\"${-y_trans/3}\">${title}</text>`\n}\n\n\n\nexport function prepare_x_axis(width, height, ticks_number, data_mock){\n    let result = []\n\n    let length = Object.keys(data_mock).length;\n    let data_frame = Math.floor(length/(ticks_number-1));\n\n    let frame = width / (ticks_number - 1)\n    for(let i=0; i<ticks_number; i++){\n        // result.push(`<text x=\"${frame*i}\" class=\"plot_xtick\" text-anchor=\"middle\" y=\"${height + 30}\">${formatDate_monthly(data_mock[data_frame*i][1])}</text>`)\n        result.push(`<text x=\"${frame*i}\" class=\"plot_xtick\" text-anchor=\"middle\" y=\"${height + 30}\">${formatDate_monthly(data_mock[data_frame*i][1])}</text>`)\n    }\n\n    return result \n\n}\n\nexport function get_x_axis(title, width, height, x_trans, y_trans){\n    let result = []\n    let line = `M 0 ${height} H ${width}`;\n\n    result.push(`<text x=\"${width/2}\" text-anchor=\"middle\" class=\"plot_xaxis_title\" y=\"${height + y_trans/2}\"><tspan>${title}</tspan></text>`)\n    result.push(`<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`)\n    return result\n}\n\nexport function get_y_axis_label(title, height, x_trans){\n    return `<text x=\"${x_trans}\" text-anchor=\"middle\" transform=\"translate(0,0) rotate(270 25.140625 309.5)\" class=\"plot_yaxis_title\" y=\"${(height + x_trans)/2 - 0.1*x_trans}\"><tspan>${title}</tspan></text>`\n}\n\nexport function get_red_line(dimensions, ranges_dates){\n\n    let x_frame = dimensions.width/(ranges_dates.max_x-1)\n\n    // console.log(\"%%%%\")\n    // console.log(dimensions)\n    // console.log(ranges_dates)\n\n    // let x = x_frame * 256;\n    let x = x_frame * (dimensions.historical_data_length - 1);\n\n\n    return `<g>\n        <path fill=\"none\" class=\"plot_pointer_line\" d=\"M ${x} 0 L ${x} ${dimensions.height}\" stroke-dasharray=\"6\" data-z-index=\"0\"></path>\n    </g>`\n}\n\nexport function get_mark_line(mark_line, height){\n    return `<g transform=\"translate(${mark_line.pos}, 0)\">\n        <path fill=\"none\" data-z-index=\"0\" class=\"plot_mark_line\" d=\"M 0 0 L 0 ${height}\" visibility=\"${mark_line.visibility}\" />         \n    </g>`\n}\n\n// export function get_info_box2(info_box, box_width, box_height){ \n\n//     let y_data = [];\n//     // console.log(info_box.value_y)\n    \n//     if(info_box !== undefined && info_box.value_y !== undefined) {\n//         for(let i=0; i<info_box.colors.length; i++){\n//             y_data.push(`<path fill=\"none\" d=\"M 5 ${(i + 1)*25 + 22} L 20 ${(i + 1)*25 + 22}\" stroke=\"${info_box.colors[i]}\" strokeWidth=\"2\" opacity=\"1\"></path>\n//             <text stroke=\"#343640\" opacity=\"1\" x=25 y=${(i + 1)*25 + 25}>Series ${i + 1} value y: ${info_box.value_y[2][i]}</text>`)\n//         }\n//     }\n\n//     let date = formatDate(info_box.value_x)\n    \n//     return `<g transform=\"translate(${info_box.pos_x}, ${info_box.pos_y})\" data-z-index=\"1\" class=\"plot_info_box\" visibility=${info_box.visibility}>\n//         <rect x=\"0\" y=\"0\" width=${box_width} height=${box_height}  />   \n//         <text x=5 y=\"25\" class=\"plot_info_box_header\">Date: ${date}</text>\n//         ${y_data}\n//     </g>`\n// }\n\n// export function get_y_axis(x, y, height){\n//     let line = `M ${x} ${y} L ${x} ${y + height}`;\n//     return `<path d=\"${line}\" fill=\"none\" class=\"plot_line\" data-z-index=\"0\" />`\n// }\n\nexport function get_info_box(info_box, box_width, box_height, keywords){ \n\n    let y_data = [];\n    \n    if(info_box !== undefined && info_box.value_y !== undefined) {\n        for(let i=0; i<info_box.colors.length; i++){\n            y_data.push(`<path fill=\"none\" d=\"M 5 ${(i + 1)*25 + 22} L 20 ${(i + 1)*25 + 22}\" stroke=\"${info_box.colors[i]}\" strokeWidth=\"2\" opacity=\"1\"></path>\n             <text x=25 y=${(i + 1)*25 + 25}>${capitalizeString(keywords[i])} ${info_box.value_y[2][i].toFixed(1)} (min: ${info_box.value_y[3][i].toFixed(1)} | max: ${info_box.value_y[2][i].toFixed(1)})</text>`)\n        }\n    }\n\n    let date = formatDate(info_box.value_x)\n    \n    return `<g transform=\"translate(${info_box.pos_x}, ${info_box.pos_y})\" data-z-index=\"1\" class=\"plot_info_box\" visibility=${info_box.visibility}>\n        <rect x=\"0\" y=\"0\" width=${box_width} height=${box_height}  />   \n        <g class=\"plot_info_box_header\">\n        <text x=5 y=\"25\">Date: ${date}</text>\n        </g>\n        ${y_data}\n    </g>`\n}\n\nexport function prepare_legend(width, height, colors, keywords){\n\n    let legend = [];\n    let keyword_sizes = []\n    \n    for(let i=0; i<colors.length; i++){\n        let l = calculate_translate_for_legend(keywords[i].length);\n        \n\n        let translation = keyword_sizes.reduce((a, b) => a + b, 0);\n\n        legend.push(`\n            <g data-z-index=\"1\" transform=\"translate(${translation},3)\">\n                <path fill=\"none\" d=\"M 0 11 L 30 11\" stroke=${colors[i]} stroke-width=\"0\"></path>\n                <text x=\"35\" textAnchor=\"start\" data-z-index=\"0\" y=\"15\" font-size=\"1.1em\" stroke=\"#6c757d\" stroke-width=\"0\">${capitalizeString(keywords[i])}</text>\n            </g>\n        `);\n        keyword_sizes.push(l+19);\n    }\n\n    return `\n        <g transform=\"translate(${width}, ${height})\" class=\"plot_legend\" >\n            ${legend}\n        </g>\n    `\n}\n\nfunction calculate_translate_for_legend(keyword_length){\n    return 10*keyword_length;\n}\n\nfunction formatDate(d)\n {\n  let date = new Date(d)\n  var dd = date.getDate(); \n  var mm = date.getMonth()+1;\n  var yyyy = date.getFullYear(); \n  if(dd<10){dd='0'+dd} \n  if(mm<10){mm='0'+mm};\n  return d = dd+'-'+mm+'-'+yyyy\n}\n\nfunction formatDate_monthly(d)\n {\n  let date = new Date(d)\n  var dd = date.getDate(); \n  var mm = date.getMonth()+1;\n  var yyyy = date.getFullYear(); \n  if(dd<10){dd='0'+dd} \n  if(mm<10){mm='0'+mm};\n  return d = mm+'-'+yyyy\n}\n\n// function capitalizeString(string) {\n//     return string.charAt(0).toUpperCase() + string.slice(1);\n// }\n"]},"metadata":{},"sourceType":"module"}